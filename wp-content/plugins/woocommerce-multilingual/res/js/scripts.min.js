jQuery(document).ready(function(a){var b=!1;window.onbeforeunload=function(c){if(b)return a("#wcml_warn_message").val()},a('.wcml-section input[type="submit"]').click(function(){b=!1}),a(".wcml_search").click(function(){window.location=a(".wcml_products_admin_url").val()+"&cat="+a(".wcml_product_category").val()+"&trst="+a(".wcml_translation_status").val()+"&st="+a(".wcml_product_status").val()+"&slang="+a(".wcml_translation_status_lang").val()}),a(".wcml_search_by_title").click(function(){window.location=a(".wcml_products_admin_url").val()+"&s="+a(".wcml_product_name").val()}),a(".wcml_reset_search").click(function(){window.location=a(".wcml_products_admin_url").val()}),"undefined"!=typeof TaxonomyTranslation&&(TaxonomyTranslation.views.TermView=TaxonomyTranslation.views.TermView.extend({initialize:function(){TaxonomyTranslation.views.TermView.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"translationSaved",this.render_overlay)},render_overlay:function(){var b=TaxonomyTranslation.classes.taxonomy.get("taxonomy");a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"wcml_update_term_translated_warnings",taxonomy:b,wcml_nonce:a("#wcml_update_term_translated_warnings_nonce").val()},success:function(c){c.hide&&(c.is_attribute?(a(".tax-product-attributes").removeAttr("title"),a(".tax-product-attributes i.otgs-ico-warning").remove()):(a(".js-tax-tab-"+b).removeAttr("title"),a(".js-tax-tab-"+b+" i.otgs-ico-warning").remove()))}})}})),a(document).on("submit","#wcml_tt_sync_variations",function(){var b=a("#wcml_tt_sync_variations"),c=b.serialize();return b.find(".wcml_tt_spinner").fadeIn(),b.find("input[type=submit]").attr("disabled","disabled"),a.ajax({type:"post",url:ajaxurl,dataType:"json",data:c,success:function(a){b.find(".wcml_tt_sycn_preview").html(a.progress),a.go?(b.find("input[name=last_post_id]").val(a.last_post_id),b.find("input[name=languages_processed]").val(a.languages_processed),b.trigger("submit")):(b.find("input[name=last_post_id]").val(0),b.find(".wcml_tt_spinner").fadeOut(),b.find("input").removeAttr("disabled"),jQuery("#wcml_tt_sync_assignment").fadeOut(),jQuery("#wcml_tt_sync_desc").fadeOut())}}),!1}),a(document).on("submit","#wcml_tt_sync_assignment",function(){var b=a("#wcml_tt_sync_assignment"),c=b.serialize();return b.find(".wcml_tt_spinner").fadeIn(),b.find("input").attr("disabled","disabled"),a(".wcml_tt_sync_row").remove(),a.ajax({type:"POST",dataType:"json",url:ajaxurl,data:"action=wcml_tt_sync_taxonomies_in_content_preview&wcml_nonce="+a("#wcml_sync_taxonomies_in_content_preview_nonce").val()+"&"+c,success:function(a){b.find(".wcml_tt_spinner").fadeOut(),b.find("input").removeAttr("disabled"),a.errors?b.find(".errors").html(a.errors):(jQuery("#wcml_tt_sync_preview").html(a.html),jQuery("#wcml_tt_sync_assignment").fadeOut(),jQuery("#wcml_tt_sync_desc").fadeOut())}}),!1}),a(document).on("click","form.wcml_tt_do_sync a.submit",function(){var b=a("form.wcml_tt_do_sync"),c=b.serialize();return b.find(".wcml_tt_spinner").fadeIn(),b.find("input").attr("disabled","disabled"),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:"action=wcml_tt_sync_taxonomies_in_content&wcml_nonce="+a("#wcml_sync_taxonomies_in_content_nonce").val()+"&"+c,success:function(a){b.find(".wcml_tt_spinner").fadeOut(),b.find("input").removeAttr("disabled"),a.errors?b.find(".errors").html(a.errors):b.closest(".wcml_tt_sync_row").html(a.html)}}),!1});new Array;a("#wcml_custom_exchange_rates").submit(function(){var b=a(this);return b.find(":submit").parent().prepend(icl_ajxloaderimg+"&nbsp;"),b.find(":submit").prop("disabled",!0),a.ajax({type:"post",dataType:"json",url:ajaxurl,data:b.serialize(),success:function(){b.find(":submit").prev().remove(),b.find(":submit").prop("disabled",!1)}}),!1}),a(document).on("click",".wcml_save_base",function(b){b.preventDefault();var c=a(this),d=a(this).closest(".wcml-dialog-container"),e="#wcml-edit-base-slug-"+c.attr("data-base")+"-"+c.attr("data-language")+"-link",f="#wcml-edit-base-slug-"+c.attr("data-base")+"-"+c.attr("data-language");a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"wcml_update_base_translation",base:c.attr("data-base"),base_value:d.find("#base-original").val(),base_translation:d.find("#base-translation").val(),language:c.attr("data-language"),wcml_nonce:a("#wcml_update_base_nonce").val()},success:function(b){a(f).remove(),a(e).find("i").remove(),a(e).append('<i class="otgs-ico-edit" >'),a(e).parent().prepend(b)}})}),a(document).on("click",".hide-rate-block",function(){var b=a(this).closest(".wcml-wrap");a(this).attr("disabled","disabled");var c=a('<span class="spinner" style="visibility: visible;">'),d=jQuery(this).data("setting");return a(this).parent().prepend(c),a(this).remove(),a.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"wcml_update_setting_ajx",setting:d,value:1,nonce:a("#wcml_settings_nonce").val()},success:function(a){b.hide()}}),!1}),a(document).on("click","#term-table-sync-header",function(){a("#wcml_tt_sync_assignment").hide(),a("#wcml_tt_sync_desc").hide()}),a(document).on("click","#term-table-header",function(){a("#wcml_tt_sync_assignment").data("sync")&&(a("#wcml_tt_sync_assignment").show(),a("#wcml_tt_sync_desc").show())})});