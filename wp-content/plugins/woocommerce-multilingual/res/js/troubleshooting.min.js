function update_product_count(){jQuery.ajax({type:"post",url:ajaxurl,data:{action:"trbl_update_count",wcml_nonce:jQuery("#trbl_update_count_nonce").val()},success:function(a){jQuery(".var_status").each(function(){jQuery(this).html(a)}),jQuery("#count_prod_variat").val(a),jQuery("#wcml_sync_product_variations").is(":checked")?sync_variations():jQuery("#wcml_sync_gallery_images").is(":checked")?sync_product_gallery():jQuery("#wcml_sync_categories").is(":checked")?sync_product_categories():jQuery("#wcml_duplicate_terms").is(":checked")?duplicate_terms():(jQuery("#wcml_trbl").removeAttr("disabled"),jQuery(".spinner").hide(),jQuery("#wcml_trbl").next().fadeOut())}})}function sync_variations(){jQuery.ajax({type:"post",url:ajaxurl,data:{action:"trbl_sync_variations",wcml_nonce:jQuery("#trbl_sync_variations_nonce").val()},success:function(a){if(0==jQuery("#count_prod_variat").val())jQuery(".var_status").each(function(){jQuery(this).html(0)}),jQuery("#wcml_sync_gallery_images").is(":checked")?sync_product_gallery():jQuery("#wcml_sync_categories").is(":checked")?sync_product_categories():jQuery("#wcml_duplicate_terms").is(":checked")?duplicate_terms():(jQuery("#wcml_trbl").removeAttr("disabled"),jQuery(".spinner").hide(),jQuery("#wcml_trbl").next().fadeOut());else{var b=jQuery("#count_prod_variat").val()-3;b<0&&(b=0),jQuery(".var_status").each(function(){jQuery(this).html(b)}),jQuery("#count_prod_variat").val(b),sync_variations()}}})}function sync_product_gallery(){jQuery.ajax({type:"post",url:ajaxurl,data:{action:"trbl_gallery_images",wcml_nonce:jQuery("#trbl_gallery_images_nonce").val(),page:jQuery("#sync_galerry_page").val()},success:function(a){if(0==jQuery("#count_prod").val())jQuery("#wcml_sync_categories").is(":checked")?sync_product_categories():jQuery("#wcml_duplicate_terms").is(":checked")?duplicate_terms():(jQuery("#wcml_trbl").removeAttr("disabled"),jQuery(".spinner").hide(),jQuery("#wcml_trbl").next().fadeOut()),jQuery(".gallery_status").html(0);else{var b=jQuery("#count_prod").val()-5;b<0?b=0:jQuery("#sync_galerry_page").val(parseInt(jQuery("#sync_galerry_page").val())+1),jQuery(".gallery_status").html(b),jQuery("#count_prod").val(b),sync_product_gallery()}}})}function sync_product_categories(){jQuery.ajax({type:"post",url:ajaxurl,data:{action:"trbl_sync_categories",wcml_nonce:jQuery("#trbl_sync_categories_nonce").val(),page:jQuery("#sync_category_page").val()},success:function(a){if(0==jQuery("#count_categories").val())jQuery("#wcml_duplicate_terms").is(":checked")?duplicate_terms():(jQuery("#wcml_trbl").removeAttr("disabled"),jQuery(".spinner").hide(),jQuery("#wcml_trbl").next().fadeOut()),jQuery(".cat_status").html(0);else{var b=jQuery("#count_categories").val()-5;b<0?b=0:jQuery("#sync_category_page").val(parseInt(jQuery("#sync_category_page").val())+1),jQuery(".cat_status").html(b),jQuery("#count_categories").val(b),sync_product_categories()}}})}function duplicate_terms(){jQuery.ajax({type:"post",url:ajaxurl,data:{action:"trbl_duplicate_terms",wcml_nonce:jQuery("#trbl_duplicate_terms_nonce").val(),attr:jQuery("#attr_to_duplicate option:selected").val()},success:function(a){if(0==jQuery("#count_terms").val())jQuery("#wcml_trbl").removeAttr("disabled"),jQuery(".spinner").hide(),jQuery("#wcml_trbl").next().fadeOut(),jQuery(".attr_status").html(0);else{var b=jQuery("#count_terms").val()-5;b<0&&(b=0),jQuery(".attr_status").html(b),jQuery("#count_terms").val(b),duplicate_terms()}}})}jQuery(document).ready(function(){jQuery("#wcml_trbl").on("click",function(){var a=jQuery(this);a.attr("disabled","disabled"),jQuery(".spinner").css("display","inline-block").css("visibility","visible"),jQuery("#wcml_sync_update_product_count").is(":checked")?update_product_count():jQuery("#wcml_sync_product_variations").is(":checked")?sync_variations():jQuery("#wcml_sync_gallery_images").is(":checked")?sync_product_gallery():jQuery("#wcml_sync_categories").is(":checked")?sync_product_categories():jQuery("#wcml_duplicate_terms").is(":checked")&&duplicate_terms()}),jQuery("#attr_to_duplicate").on("change",function(){jQuery(".attr_status").html(jQuery(this).find("option:selected").attr("rel")),jQuery("#count_terms").val(jQuery(this).find("option:selected").attr("rel"))})});