"use strict";var sfTranslatedText=jQuery(".spb_translated_objects");var deletedElement;var draggedItem;var percentageClass;var elements_values_array=[];var currentAsset="";(function(a){a.log=function(b){if(typeof(window.console)!="undefined"){console.log(b)}};a.swift_page_builder={isMainContainerEmpty:function(){if(!jQuery(".spb_main_sortable > div").length){a(".metabox-builder-content").addClass("empty-builder")}else{a(".metabox-builder-content").removeClass("empty-builder")}},cloneSelectedImagesFromMediaTab:function(b){var e=a(".spb_current_active_media_button").removeClass(".spb_current_active_media_button");var d=e.next();var g=d.prev().prev(),f=d.find(".sf_gallery_widget_attached_images_list");f.html(b);var c="";f.find("li").each(function(){c+=(c.length>0?",":"")+a(this).attr("media_id")});g.val(c);attachedImgSortable(f);tb_remove()},galleryImagesControls:function(){a(document).on("click","#spb .sf_gallery_widget_add_images",function(f){f.preventDefault();var c="",d=a(this).parent().find(".attach_image"),b=a(this).parent().find(".sf_gallery_widget_attached_images_list");if(c){c.open();return}c=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text"),},multiple:false});c.on("select",function(){var e=c.state().get("selection").first().toJSON();d.val(e.id);b.empty();b.append('<li class="added" media_id="'+e.id+'"><img src="'+e.sizes.thumbnail.url+'" alt="" rel="'+e.id+'"><div class="sf-close-image-bar"><a title="Deselect" class="sf-close-delete-file" href="#">Ã—</a></div></li>');jQuery(".sf-close-delete-file").click(function(g){g.preventDefault();jQuery(this).parent().parent().remove();jQuery(".sf_gallery_widget_attached_images_ids").val("");return false});return false});c.open()});a(".gallery_widget_img_select li").live("click",function(){a(this).toggleClass("added");var e=a(this).parent().parent().prev().prev().prev(),b=(e.val().length>0)?e.val().split(","):[],d=a(this).find("img").attr("rel"),c=a.inArray(d,b);if(c==-1){b.push(d)}else{b.splice(c,1)}e.val(b.join(","))})},initializeFormEditing:function(f){removeClassProcessedElements();a("#spb_edit_form .wp-editor-wrap .textarea_html").each(function(){initTinyMce(a(this))});var g=800;if(jQuery("#spb .custom_css_percentage").attr("checked")=="checked"){g=20}jQuery("#padding_vertical, #padding_vertical_val, #padding_horizontal, #padding_horizontal_val, #margin_vertical, #margin_vertical_val ").attr("max",g);if(f.attr("data-element_type")=="spb_text_block"){var i=f.find(".padding_vertical");var b=f.find(".padding_horizontal");if(i.val()>0){if(jQuery(".spb_edit_form_elements .custom-padding-top").val()==""){jQuery(".spb_edit_form_elements .custom-padding-top").val(i.val())}if(jQuery(".spb_edit_form_elements .custom-padding-bottom").val()==""){jQuery(".spb_edit_form_elements .custom-padding-bottom").val(i.val())}}if(b.val()>0&&jQuery(".spb_edit_form_elements .custom-padding-left").val()==""){if(jQuery(".spb_edit_form_elements .custom-padding-left").val()==""){jQuery(".spb_edit_form_elements .custom-padding-left").val(b.val())}if(jQuery(".spb_edit_form_elements .custom-padding-right").val()==""){jQuery(".spb_edit_form_elements .custom-padding-right").val(b.val())}}}if(f.attr("data-element_type")=="spb_column"){var b=f.find(".padding_horizontal").last();var i=f.find(".padding_vertical").last();var g=20;jQuery("#col_el_class").parent().parent().parent().hide();jQuery(".col_sm").attr("disabled","disabled");setTimeout(function(){jQuery("#col_padding_val").parent().parent().parent().hide();if(parseInt(jQuery("#col_padding_val").val())>0){b.val(parseInt(jQuery("#col_padding_val").val()));i.val(parseInt(jQuery("#col_padding_val").val()));jQuery("#col_padding_val").val(0);jQuery("#col_padding").val(0);jQuery("#padding_horizontal").attr("max",g);jQuery("#padding_horizontal_val").attr("max",g);jQuery("#padding_vertical").attr("max",g);jQuery("#padding_vertical_val").attr("max",g);jQuery("#spb_edit_form .custom_css_percentage").attr("checked","checked");jQuery(".custom-padding-bottom").val(b.val());jQuery(".custom-padding-top").val(b.val());jQuery(".custom-padding-left").val(b.val());jQuery(".custom-padding-right").val(b.val())}jQuery("#col_padding").attr("disabled","disabled");jQuery("#padding_horizontal_val").attr("value",b.val());jQuery("#padding_horizontal").attr("value",b.val());jQuery("#padding_vertical_val").attr("value",i.val());jQuery("#padding_vertical").attr("value",i.val())},100)}if(f.attr("data-element_type")=="spb_row"){jQuery("#row_el_class").parent().parent().parent().hide();var b=f.find(".row_padding_horizontal");var i=f.find(".row_padding_vertical");var j=f.find(".row_margin_vertical");var g=800;var d;var e;var k=f.find(".row_el_class").val();if(k!=""){jQuery("#row_el_class").val("");jQuery("#el_class").val(k)}jQuery("#row_margin_vertical_val").attr("disabled","disabled");jQuery("#row_padding_horizontal_val").attr("disabled","disabled");jQuery("#row_padding_vertical_val").attr("disabled","disabled");jQuery("#row_margin_vertical").attr("disabled","disabled");jQuery("#row_padding_horizontal").attr("disabled","disabled");jQuery("#row_padding_vertical").attr("disabled","disabled");jQuery("#row_padding_vertical").prev().css("background-color","#ccc");jQuery("#row_padding_horizontal").prev().css("background-color","#ccc");jQuery("#row_margin_vertical").prev().css("background-color","#ccc");if(b.val()>0){if(jQuery(".spb_edit_form_elements .custom-padding-left").val()==""&&jQuery(".spb_edit_form_elements .custom-padding-right").val()==""){d=b.val()/20*100;e=g*d/100;jQuery("#padding_horizontal_val").val(e);jQuery("#padding_horizontal").val(e);b=jQuery("#padding_horizontal_val")}if(jQuery(".spb_edit_form_elements .custom-padding-left").val()==""){jQuery(".spb_edit_form_elements .custom-padding-left").val(b.val())}if(jQuery(".spb_edit_form_elements .custom-padding-right").val()==""){jQuery(".spb_edit_form_elements .custom-padding-right").val(b.val())}}if(i.val()>0){jQuery("#padding_vertical_val").val(i.val());jQuery("#padding_vertical").val(i.val());if(jQuery(".spb_edit_form_elements .custom-padding-bottom").val()==""){jQuery(".spb_edit_form_elements .custom-padding-bottom").val(i.val())}if(jQuery(".spb_edit_form_elements .custom-padding-top").val()==""){jQuery(".spb_edit_form_elements .custom-padding-top").val(i.val())}}if(j.val()>0){jQuery("#margin_vertical_val").val(j.val());jQuery("#margin_vertical").val(j.val());if(jQuery(".spb_edit_form_elements .custom-margin-bottom").val()==""){jQuery(".spb_edit_form_elements .custom-margin-bottom").val(j.val())}if(jQuery(".spb_edit_form_elements .custom-margin-top").val()==""){jQuery(".spb_edit_form_elements .custom-margin-top").val(j.val())}}}a(".spb-colorpicker").minicolors();if(a(".noUiSlider").length>0){a(".noUiSlider").each(function(){var o=a(this),m=o.next("input.spb-uislider"),q=parseInt(m.val(),10),p=parseFloat(m.data("step")),n=parseFloat(m.data("min")),l=parseFloat(m.data("max"));o.noUiSlider({range:{min:n,max:l},start:[q],handles:1,step:p,format:wNumb({decimals:0,thousand:"",postfix:"",})});o.Link("lower").to(m)})}if(a(".spb-buttonset").length>0){a(".spb-buttonset").each(function(){var l=a(this);l.find(".buttonset-item,.ui-button").button();l.buttonset()})}if(a(".icon-picker").length>0){a(".icon-picker").each(function(){var m=a(this).val(),l=a(this).parent().find(".font-icon-grid");if(m!==""){l.find("."+m).parent().addClass("selected")}})}a(".font-icon-grid.std-grid").on("click","li",function(){var l=a(this),m="";if(l.hasClass("svg-icon")){m=l.data("icon")}else{m=l.find("i").attr("class")}a(".font-icon-grid li").removeClass("selected");l.addClass("selected");l.parent().parent().find("input").val(m);l.parent().parent().find("input").not(".search-icon-grid").val(m)});a(document).on("click",".section_add_icon",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()});a(document).on("click",".section_icon_image",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()});a(document).on("click",".font-icon-grid.repeater-grid li",function(){var l=a(this),n="";if(l.hasClass("svg-icon")){n=l.data("icon")}else{n=l.find("i").attr("class")}l.parent().parent().find(".icon_field_value").val(n);var m=jQuery(this).find("i").clone();l.parent().parent().find(".section_icon_image").html(m);jQuery(this).parent().hide();l.parent().parent().find(".section_icon_image").show()});var c=f.children(".spb_edit_callback");if(c.length==1){var h=window[c.attr("value")];if(typeof h==="function"){}}a(".spb_save_edit_form").unbind("click").click(function(l){l.preventDefault();removeClassProcessedElements();saveFormEditing(f)});a("#cancel-background-options").unbind("click").click(function(l){l.preventDefault();jQuery("body").css("overflow","");a(".spb_tinymce").each(function(){if(tinyMCE.majorVersion>=4){tinyMCE.execCommand("mceRemoveEditor",true,a(this).attr("id"))}else{tinyMCE.execCommand("mceRemoveControl",true,a(this).attr("id"))}});a("#spb_edit_form").html("").fadeOut();a("#publish").show()});jQuery("#spb_edit_form").find(".spb_param_value.caption").parent().parent().hide()},onDragPlaceholder:function(){return a('<div id="drag_placeholder"></div>')},addLastClass:function(c){var e,d,f,b;e=0;d=0;f=0;b=a(c);b.children(".spb_sortable").removeClass("spb_first spb_last");if(b.hasClass("spb_main_sortable")){b.find(".spb_sortable .spb_sortable").removeClass("sortable_1st_level");b.children(".spb_sortable").addClass("sortable_1st_level");b.children(".spb_sortable:eq(0)").addClass("spb_first");b.children(".spb_sortable:last").addClass("spb_last")}if(b.hasClass("spb_column_container")){b.children(".spb_sortable:eq(0)").addClass("spb_first");b.children(".spb_sortable:last").addClass("spb_last")}b.children(".spb_sortable").each(function(){var g=a(this);if(g.hasClass("span12")||g.hasClass("spb_widget")){d=12}else{if(g.hasClass("span10")){d=10}else{if(g.hasClass("span9")){d=9}else{if(g.hasClass("span8")){d=8}else{if(g.hasClass("span6")){d=6}else{if(g.hasClass("span4")){d=4}else{if(g.hasClass("span3")){d=3}else{if(g.hasClass("span2")){d=2}}}}}}}}e+=d;if(e>10&&e<=12){g.addClass("spb_last");g.next(".spb_sortable").addClass("spb_first");e=0}if(e>12){g.addClass("spb_first");g.prev(".spb_sortable").addClass("spb_last");e=d}if(g.hasClass("spb_column")||g.hasClass("spb_row")||g.hasClass("spb_tabs")||g.hasClass("spb_tour")||g.hasClass("spb_gmaps")||g.hasClass("spb_accordion")){if(g.find(".spb_element_wrapper .spb_column_container").length>0){g.removeClass("empty_column");g.addClass("not_empty_column");g.find(".spb_element_wrapper .spb_column_container").each(function(){a.swift_page_builder.addLastClass(a(this));if(a(this).find("div:not(.container-helper)").length===0){a(this).addClass("empty_column");a(this).html(a("#container-helper-block").html())}else{a(this).find(".container-helper").each(function(){var h=jQuery(this);h.appendTo(h.parent())})}})}else{if(g.find(".spb_element_wrapper .spb_column_container").length===0){g.removeClass("not_empty_column");g.addClass("empty_column")}else{g.removeClass("empty_column not_empty_column")}}}})},save_spb_html:function(){this.addLastClass(a(".spb_main_sortable"));var b=generateShortcodesFromHtml(a(".spb_main_sortable"));removeClassProcessedElements();if(isTinyMceActive()!==true){a("#content").val(b)}else{tinyMCE.get("content").setContent(b,{format:"html"})}}}})(jQuery);jQuery(document).ready(function(g){spb_reorder_saved_templates();spb_templateSystem();spb_customElementSystem();jQuery(document).on("click",".ui-tabs-nav .edit_tab",function(){showEditSmallForm(jQuery(this));return false});jQuery(document).on("change","#padding_vertical",function(){jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery(this).val())});jQuery(document).on("change","#padding_horizontal",function(){jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery(this).val())});jQuery(document).on("change","#margin_vertical",function(){jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery(this).val())});jQuery(document).on("change","#border_size",function(){jQuery(".spb_edit_form_elements .custom-border-top").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-border-bottom").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-border-left").val(jQuery(this).val());jQuery(".spb_edit_form_elements .custom-border-right").val(jQuery(this).val())});jQuery(document).on("change","#spb .custom_css_percentage",function(){var j;var k;var i;if(jQuery(this).attr("checked")=="checked"){j="20"}else{j="800"}k=jQuery("#padding_vertical_val").val()/jQuery("#padding_vertical_val").attr("max")*100;i=j*k/100;jQuery("#padding_vertical").attr("max",j);jQuery("#padding_vertical_val").attr("max",j);jQuery("#padding_vertical").val(i);jQuery("#padding_vertical_val").val(i);jQuery("#padding_vertical").trigger("change");k=jQuery("#padding_horizontal").val()/jQuery("#padding_horizontal_val").attr("max")*100;i=j*k/100;jQuery("#padding_horizontal").attr("max",j);jQuery("#padding_horizontal_val").attr("max",j);jQuery("#padding_horizontal").val(i);jQuery("#padding_horizontal_val").val(i);jQuery("#padding_horizontal").trigger("change");k=jQuery("#margin_vertical_val").val()/jQuery("#margin_vertical_val").attr("max")*100;i=j*k/100;jQuery("#margin_vertical").attr("max",j);jQuery("#margin_vertical_val").attr("max",j);jQuery("#margin_vertical").val(i);jQuery("#margin_vertical_val").val(i);jQuery("#margin_vertical").trigger("change");k=jQuery(".custom-padding-bottom").val()/jQuery("#padding_vertical_val").attr("max")*100;i=j*k/100;jQuery(".custom-padding-bottom").val(i);k=jQuery(".custom-padding-top").val()/jQuery("#padding_vertical_val").attr("max")*100;i=j*k/100;jQuery(".custom-padding-top").val(i);k=jQuery(".custom-padding-left").val()/jQuery("#padding_horizontal_val").attr("max")*100;i=j*k/100;jQuery(".custom-padding-left").val(i);k=jQuery(".custom-padding-right").val()/jQuery("#padding_horizontal_val").attr("max")*100;i=j*k/100;jQuery(".custom-padding-right").val(i);k=jQuery(".custom-margin-bottom").val()/jQuery("#margin_vertical_val").attr("max")*100;i=j*k/100;jQuery(".custom-margin-bottom").val(i);k=jQuery(".custom-margin-top").val()/jQuery("#margin_vertical_val").attr("max")*100;i=j*k/100;jQuery(".custom-margin-top").val(i)});jQuery(document).on("change","#spb .simplified_controls",function(){detailedControls(jQuery(this))});jQuery(document).on("input",".custom-margin",function(){jQuery(".lb_css_field .cm-global").val(jQuery(this).val())});jQuery(document).on("input",".custom-border",function(){jQuery(".lb_css_field .cb-global").val(jQuery(this).val())});jQuery(document).on("input",".custom-padding",function(){jQuery(".lb_css_field .cp-global").val(jQuery(this).val())});jQuery(document).on("click",".ui-tabs-nav .delete_tab",function(l){l.preventDefault();var k=sfTranslatedText.attr("data-spb-delete-tabs-section-q1");var j=sfTranslatedText.attr("data-spb-delete-tabs-header");var i='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-tab" class="modal modal_spb"><div class="modal-content">';i+="<h4>"+j+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+k+"</label>";i+='</div></div><div class="modal-footer modal-delete-tab"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(i);jQuery("#modal-delete-tab").openModal();deletedElement=jQuery(this);return false});jQuery(document).on("click",".tabs_expanded_helper .add_tab, .add-pin-to-map, .add-parallax-layer",function(j){j.preventDefault();var n=(jQuery(this).closest(".spb_sortable").hasClass("spb_tour"))?"Slide":"Tab",m=jQuery(this).parent().parent().parent().find(".ui-tabs-nav li").length+1,l=jQuery(this).parent().parent().parent().parent().find(".spb_tabs_holder"),k=l.find(".ui-tabs-nav"),i="";jQuery(this).parent().hide();jQuery(this).parent().parent().find(".container-helper").show();if(jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")){n="Pin";m=jQuery(this).parent().parent().find(".spb_map_pin").length+1}if(jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")){n="Layer";m=jQuery(this).parent().parent().find(".spb_multilayer_parallax_layer").length+1}if(jQuery(this).closest(".spb_sortable").hasClass("spb_tour")){i="Tour Tab";k.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+m+'" aria-labelledby="ui-id-'+m+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+m+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+m+'"><span>'+n+" "+m+'</span></a><a class="delete_tab"></a><a class="edit_tab"></a></li>');l.append('<div id="tab-'+m+'" class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+m+'" role="tabpanel" aria-expanded="true" aria-hidden="false"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 spb_first spb_last ui-sortable-helper"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="controls sidebar-name"> <div class="column_size_wrapper"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right"> <a class="column_popup" href="#" title="Pop up"></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_element_wrapper clearfix"><input type="hidden" class="spb_param_value title textfield " name="title" value=""><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value pb_margin_bottom dropdown " name="pb_margin_bottom" value="no"><input type="hidden" class="spb_param_value pb_border_bottom dropdown " name="pb_border_bottom" value="no"><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> <!-- end .spb_element_wrapper --></div> <!-- end #element-spb_text_block --></div>')}else{if(jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")){i="Map Pin";l=jQuery(this).parent().parent().parent().find(".spb_tabs_holder");k.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+m+'" aria-labelledby="ui-id-'+m+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+m+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+m+'"><span>'+n+" "+m+"</span></a></li>");l.append('<div class="row-fluid spb_column_container map_pin_wrapper not-column-inherit not-sortable"><div data-element_type="spb_map_pin" class="spb_map_pin spb_content_element spb_sortable span12 spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_map_pin" value="spb_map_pin"><div class="spb_element_wrapper  over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="icon-map"></span></div><div class="el_name_holder" data_default_name="'+i+'">'+i+'</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" class="validate textfield" value="Map Pin"><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value pin_title textfield " name="pin_title" value="First Pin"><input type="hidden" class="spb_param_value address textfield " name="address" value="Click the edit button to change the map pin details."><input type="hidden" class="spb_param_value pin_latitude textfield " name="pin_latitude" value=""><input type="hidden" class="spb_param_value pin_longitude textfield " name="pin_longitude" value=""><input type="hidden" class="spb_param_value pin_image attach_image " name="pin_image" value=""><input type="hidden" class="spb_param_value pin_link textfield " name="pin_link" value=""><input type="hidden" class="spb_param_value pin_button_text textfield " name="pin_button_text" value=""><div class="spb_param_value holder content textarea_html hide-shortcode" name="content">This is a map pin. Click the edit button to change it.</div></div> <!-- end .spb_element_wrapper --> <!-- end #element-spb_map_pin --></div></div>')}else{if(jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")){i="Multilayer Parallax Layer";k.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+m+'" aria-labelledby="ui-id-'+m+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+m+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+m+'"><span>'+n+" "+m+"</span></a></li>");l.append('<div class="row-fluid spb_column_container not-column-inherit not-sortable"><div data-element_type="spb_multilayer_parallax_layer" class="spb_multilayer_parallax_layer spb_content_element spb_sortable span12"><input type="hidden" class="spb_sc_base" name="element_name-spb_multilayer_parallax_layer" value="spb_multilayer_parallax_layer"><div class="controls sidebar-name"><div class="controls_right" style="display: block;"> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a></div></div><div class="spb_element_wrapper over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="spb_multilayer_parallax_layer"></span></div><div class="el_name_holder" data_default_name="'+i+'">'+i+'</div><div class="el_name_editor"><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input name="el_name_editor" id="el_name_editor" type="text" class="validate textfield" value="'+i+' "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input type="hidden" class="spb_param_value layer_image attach_image " name="layer_image" value=""><img width="66" height="66" src="'+jQuery(this).closest(".spb_sortable").attr("data-content-url")+'" class="attachment-thumbnail" alt="" title=""><a href="#" class="column_edit_trigger image-exists"><i class="spb-icon-single-image"></i>No image yet! Click here to select it now.</a><input type="hidden" class="spb_param_value layer_type dropdown " name="layer_type" value="original"><input type="hidden" class="spb_param_value layer_bg_pos dropdown " name="layer_bg_pos" value="center_center"><input type="hidden" class="spb_param_value layer_bg_repeat dropdown " name="layer_bg_repeat" value="no-repeat"><input type="hidden" class="spb_param_value layer_depth dropdown " name="layer_depth" value="0.00"><input type="hidden" class="spb_param_value section_misc_options section " name="section_misc_options" value=""><input type="hidden" class="spb_param_value text_layer buttonset " name="text_layer" value="no"><input type="hidden" class="spb_param_value content textarea_html " name="content" value=""></div> <!-- end .spb_element_wrapper --></div> <!-- end #element-spb_multilayer_parallax_layer --></div></div>')}else{i="Tab";k.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+m+'" aria-labelledby="ui-id-'+m+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+m+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+m+'"><span>'+n+" "+m+'</span></a><a class="edit_tab"><span class="icon-edit"></span></a></a><a class="delete_tab"><span class="icon-delete"></span></a></li>');l.append('<div id="tab-'+m+'" class="row-fluid spb_column_container spb_sortable not-column-inherit not-sortable ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+m+'" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 sortable_1st_level spb_last spb_first"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fa-chevron-left"></i><i class="fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p>This is a text block. Click the edit button to change this text.</p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown " name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> <!-- end .spb_element_wrapper --></div><div class="tabs_expanded_helper"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_tab"><span class="icon-add-tab"></span>Add Tab</a></div><div class="container-helper"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div>')}}}if(!jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")&&!jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")){jQuery(this).parent().parent().parent().tabs("refresh")}initDroppable();save_spb_html();savePbHistory("",i,"Added");return false});jQuery(document).on("click","#dropdown-history li a",function(i){i.preventDefault();if(isTinyMceActive()!==true){jQuery("#content").val(stripslashes(jQuery(this).attr("data-revision-value")))}else{tinyMCE.activeEditor.setContent(stripslashes(jQuery(this).attr("data-revision-value")))}jQuery("#spb-empty").hide();spb_shortcodesToBuilder(true)});jQuery(document).on("click",".tabs_expanded_helper .add_section",function(j){j.preventDefault();var i=jQuery(this).parent().parent().parent().parent().parent();var m=i.find(".group").length+1;var l="Section";var k='<div class="group"><h3 class="ui-accordion-header ui-state-default ui-corner-all  ui-sortable-handle" role="tab" id="ui-id-9" aria-controls="ui-id-'+m+'" aria-selected="false" aria-expanded="false" tabindex="-1"><a class="title-text" href="#section-'+m+'" id="section-'+m+'">'+l+" "+m+'</a><div class="accordion_holder"><a class="delete_tab"><span class="icon-delete"></span></a><a class="edit_tab"><span class="icon-edit"></span></a></h3><div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" id="ui-id-'+m+'" aria-labelledby="ui-id-'+m+'" role="tabpanel" style="display: block;" aria-hidden="false">';k+='<div class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable"><div data-element_type="spb_text_block"class="spb_text_block spb_content_element spb_sortable span12 ui-resizable ui-sortable-handle  spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fa-chevron-left"></i><i class="fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" id="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown" name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> <!-- end .spb_element_wrapper --></div> <!-- end #element-spb_text_block --><div class="tabs_expanded_helper" style="display: none;"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_section"><span class="icon-add-tab"></span>Add Section</a></div><div class="container-helper ui-sortable-handle" style="display: block;"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div></div></div></div>';jQuery(this).parent().hide();jQuery(this).parent().parent().find(".container-helper").show();i.append(k);i.accordion("destroy").accordion({header:"> div > h3",autoHeight:true,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(n,o){o.item.children("h3").triggerHandler("focusout");save_spb_html()}});initDroppable();save_spb_html();jQuery(this).parent().parent().parent().parent().find(".title-text").click();savePbHistory("","Accordion Section","Added");return false});jQuery(document).on("click",".spb_accordion_holder .delete_tab",function(l){l.preventDefault();var k=sfTranslatedText.attr("data-spb-delete-accordion-section-q1");var j=sfTranslatedText.attr("data-spb-delete-accordion-header");var i='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-section" class="modal modal_spb"><div class="modal-content">';i+="<h4>"+j+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+k+"</label>";i+='</div></div><div class="modal-footer modal-delete-section"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(i);jQuery("#modal-delete-section").openModal();deletedElement=jQuery(this);return false});jQuery(document).on("click",".modal-delete-section .modal-ok-button",function(i){i.preventDefault();deletedElement.parent().closest(".group").remove();Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2000);save_spb_html()});jQuery(document).on("click",".modal-remove-template .modal-ok-button",function(j){j.preventDefault();var i={action:"spb_delete_template",template_id:deletedElement};jQuery.post(ajaxurl,i,function(k){jQuery(".spb-prebuilt-pages").html(k);spb_reorder_saved_templates();Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2000)})});jQuery(document).on("click",".modal-delete-tab .modal-ok-button",function(m){m.preventDefault();var l=deletedElement.closest("li").index(),j=l+1;if(l<0){return false}var k=deletedElement.parent().parent().parent();var i=k.find(".ui-tabs-nav li:eq("+l+")").attr("aria-controls");k.find(".ui-tabs-nav li:eq("+l+")").remove();if(k.closest(".spb_sortable").hasClass("spb_tour")){k.find("#tab-"+j).remove();k.find("#tab-slide-"+j).remove()}else{k.find("#"+i).remove();k.find("#tab-"+i).remove()}k.tabs("refresh");save_spb_html();Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2000);jQuery(".modal_wrapper").remove();return false});jQuery(document).on("click",".input-field label",function(){if(jQuery(this).prev().hasClass("validate")){jQuery(this).prev().focus()}});jQuery(".tooltipped").tooltip({delay:0});jQuery(document).on("click",".right_top_section .icon-delete",function(){jQuery(this).parent().parent().parent().remove()});jQuery(document).on("click",".pricing_column_holder .icon-delete",function(){jQuery(this).parent().parent().parent().remove()});jQuery(document).on("click",".spb_add_new_icon_section",function(k){k.preventDefault();var j=jQuery(".section_repeater").size()+1;var i="";i+='<li><div class="section_repeater"><div class="left_section"><div class="section_icon_image" style="display:none;"></div><a href="#" class="section_add_icon"><span class="icon-add"></span></a></div><div class="right_section"><div class="right_top_section">';i+='<input name="icon_title_'+j+'" id="icon_title_'+j+'" class="textfield validate active icon_title " placeholder="Icon Box Title" type="text" value="" /><span class="icon-drag-handle"></span><span class="icon-delete"></span></div>';i+='<div class="right_bottom_section"><input name="icon_link_'+j+'" id="icon_link_'+j+'" class="textfield validate active icon_link" placeholder="Icon Box Link" type="text" value="" />';i+='<select id="select_section_'+j+'"  class="icon_target"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank">'+sfTranslatedText.attr("data-spb-new-window")+"</option></select></div>";i+='</div><ul class="font-icon-grid repeater-grid svg-grid">'+jQuery(".section_repeater").find(".font-icon-grid").first().html()+"</ul></div></li>";jQuery(".section_repeater").last().parent().after(i);jQuery(".icon_section_holder").find("select").not(".disabled").material_select()});jQuery(document).on("click",".spb_add_new_column_feature",function(k){k.preventDefault();var j=jQuery(".section_repeater_features").size()+1;var i="";i+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">';i+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+j+'" id="plan_feature_name_'+j+'" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+j+'">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>";i+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+j+'" id="plan_feature_name_el_class_'+j+'" class="textfield validate active feature_el_class" type="text"  value="" /><label for="plan_feature_name_el_class_'+j+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>";i+=" </div></div></li>";jQuery(this).parent().parent().find(".pricing_column_feature_holder").append(i);jQuery(".collapsible").collapsible({accordion:false})});jQuery(document).on("click",".spb_add_new_pricing_column",function(l){l.preventDefault();var k=jQuery(".section_repeater").size()+1;var j="";var i="";i+='<ul class="collapsible pricing_column_feature_holder" data-collapsible="accordion">';i+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">';i+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+k+'_1" id="plan_feature_name_'+k+'_1" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+k+'_1">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>";i+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+k+'_1" id="plan_feature_name_el_class_'+k+'_1" class="textfield validate active feature_el_class" type="text"  value="" /><label class="active" for="plan_feature_name_el_class_'+k+'_1">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>";i+="</div></div></li></ul>";i+='<div class="bottom_action"><a href="#" class="spb_add_new_column_feature">'+sfTranslatedText.attr("data-spb-add-feature")+"</a></div>";j+='<li><div class="collapsible-header"> '+sfTranslatedText.attr("data-spb-new-plan")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body">';j+='<div class="section_repeater">';j+='<div class="price_column_holder">';j+='<div class="row"><div class="input-field col s12"><input name="plan_name_'+k+'" id="plan_name_'+k+'" class="textfield validate active plan_name" type="text"  value="'+sfTranslatedText.attr("data-spb-new-plan")+'" /><label class="active" for="plan_name_'+k+'">'+sfTranslatedText.attr("data-spb-plan-name")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12 plan_highlight_column"><select id="select_highlight_column_'+k+'" ><option value="no" selected>'+sfTranslatedText.attr("data-spb-no")+'</option><option value="yes">'+sfTranslatedText.attr("data-spb-yes")+'</option></select><label for="select_highlight_column_'+k+'">'+sfTranslatedText.attr("data-spb-highlight-column")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12"><input name="plan_price_'+k+'" id="plan_price_'+k+'" class="textfield validate active plan_price" type="text" value="" /><label for="plan_price_'+k+'">'+sfTranslatedText.attr("data-spb-plan-price")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12"><input name="plan_period_'+k+'" id="plan_period_'+k+'" class="textfield validate active plan_period" type="text" value="" /><label for="plan_period_'+k+'">'+sfTranslatedText.attr("data-spb-plan-period")+"</label></div></div>";j+='<div class="features_row_holder"><label>'+sfTranslatedText.attr("data-spb-features")+"</label>"+i+"</div>";j+='<div class="row"><div class="input-field col s12"><input name="plan_button_text_'+k+'" id="plan_button_text_'+k+'" class="textfield validate active plan_button_text" type="text" value="" /><label for="plan_button_text_'+k+'">'+sfTranslatedText.attr("data-spb-btn-text")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12"><input name="plan_link_url_'+k+'" id="plan_link_url_'+k+'" class="textfield validate active plan_link_url" type="text" value="" /><label for="plan_link_url_'+k+'">'+sfTranslatedText.attr("data-spb-link-url")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12 plan_link_target"> <select id="select_link_target_'+k+'"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank" >'+sfTranslatedText.attr("data-spb-new-window")+'</option></select><label for="select_link_target_'+k+'">'+sfTranslatedText.attr("data-spb-link-target")+"</label></div></div>";j+='<div class="row"><div class="input-field col s12"><input name="plan_extra_class_'+k+'" id="plan_extra_class_'+k+'" class="textfield validate active plan_extra_class" type="text" value="" /><label for="plan_extra_class_'+k+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>";j+="</div></div></div></li>";jQuery(".section_repeater").last().parent().parent().after(j);jQuery(".pricing_column_holder").find("select").not(".disabled").material_select();jQuery(".collapsible").collapsible({accordion:false})});jQuery(document).on("click",".section_repeater input",function(){jQuery(this).focus()});jQuery(".dropdown-history").dropdown({inDuration:300,outDuration:225,constrain_width:false,hover:true,gutter:0,belowOrigin:true,alignment:"left"});g(".tooltipped").tooltip({delay:0});jQuery("body").on("change","#spb_edit_form select, #spb_edit_form radio, #spb_edit_form input[type=checkbox], #spb_edit_form input[type=hidden], .spb-buttonset",function(){if(jQuery(this).hasClass("spb-buttonset")){var i=jQuery(this).parent().find(":radio:checked").data("id");jQuery(this).find(".buttonset").val(i)}check_form_dependency_fields()});jQuery(document).on("hover",".spb-content-elements li",function(){jQuery(this).addClass("z-depth-4")});jQuery(document).on("mouseout",".spb-content-elements li",function(){jQuery(this).removeClass("z-depth-4")});jQuery(".sf-close-delete-file").live("click",function(i){i.preventDefault();jQuery(this).parent().parent().remove();jQuery(".sf_gallery_widget_attached_images_ids").val("");return false});jQuery("body").append('<div class="spb-modal-tabs"></div>');jQuery(document).on("change",".range-field .uislider",function(){jQuery("#"+jQuery(this).attr("name")+"_val").val(jQuery(this).val());var i=jQuery(this);if(parseInt(jQuery(this).val())>parseInt(i.attr("max"))){i.prev().width("100%");jQuery(this).val(i.attr("max"))}else{i.prev().width(""+jQuery(this).val()/i.attr("max")*100+"%")}});jQuery(document).on("keydown",".uisliderinput",function(j){var i=jQuery(this).parent().prev().find("input");if(j.which==13||j.keyCode==13){j.preventDefault();if(parseInt(jQuery(this).val())>parseInt(i.attr("max"))){i.prev().width("100%");i.val(i.attr("max"));jQuery(this).val(i.attr("max"))}else{i.prev().width(""+jQuery(this).val()/i.attr("max")*100+"%");jQuery(this).parent().prev().find("input").val(jQuery(this).val())}jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery("#padding_vertical").val());jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery("#padding_vertical").val());jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery("#padding_horizontal").val());jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery("#padding_horizontal").val());jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery("#margin_vertical").val());jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery("#margin_vertical").val())}});g(document).on("click",".tab_features_row",function(){jQuery(this).addClass("active");jQuery(this).prev().removeClass("active");jQuery(this).parent().parent().find(".features_row_holder").show();jQuery(this).parent().parent().find(".section_repeater").hide()});g(document).on("click",".tab_price_column",function(){jQuery(this).addClass("active");jQuery(this).next().removeClass("active");jQuery(this).parent().parent().find(".features_row_holder").hide();jQuery(this).parent().parent().find(".section_repeater").show()});g(document).on("focusin",".uisliderinput",function(i){i.preventDefault();i.stopImmediatePropagation();return false});g(document).on("mouseover",".spb_accordion",function(){g(this).find(".spb_accordion_controls").fadeIn()});g(document).on("mouseleave",".spb_accordion",function(){g(this).find(".spb_accordion_controls").fadeOut()});g(document).on("mouseover",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){g(this).find(".spb_tab_controls").fadeIn()});g(document).on("mouseleave",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){g(this).find(".spb_tab_controls").fadeOut()});g(document).on("mouseover",".spb-content-elements-saved .spb_elements_li",function(){g(this).find(".spb_remove_element").show()});g(document).on("mouseleave",".spb-content-elements-saved .spb_elements_li",function(){g(this).find(".spb_remove_element").hide()});g(document).on("mouseenter",".spb_content_element:not(.spb_tabs, .spb_accordion, .spb_gmaps, .spb_multilayer_parallax, .spb_tour)",function(){var i=g(this);setTimeout(function(){if(i.is(":hover")){i.find(".spb_elem_controls").fadeIn()}},100);return false});g(document).on("mouseleave",".spb_content_element",function(i){g(this).find(".spb_elem_controls").hide();if(g(this).find(".el_name_editor").css("display")=="block"){g(this).find(".el_name_editor").hide();g(this).find(".el_name_editor").prev().show()}i.stopImmediatePropagation()});g(document).on("click",".el_name_holder",function(){g(this).parent().find(".spb_elem_controls").fadeOut();var i=g(this).next().find("#el_name_editor").first();g(this).hide();g(this).next().show();i.focus()});g(document).on("click",".el-name-save",function(i){var j;i.preventDefault();if(g(this).parent().prev().hasClass("el_name_holder")){j=g(this).parent()}else{j=g(this).parent().parent()}j.prev().html(g(this).prev().val());j.parent().parent().find(".element_name").first().val(g(this).prev().val());j.prev().show();j.hide();save_spb_html()});g(document).keypress(function(i){if(i.which==13&&jQuery(i.target).attr("id")=="el_name_editor"){i.preventDefault();g(".el-name-save").trigger("click")}});g(document).on("click","#el_name_editor",function(i){i.preventDefault()});g(document).on("click",".tab_closing",function(){cleaningAfterClosingElementsModal();return false});g(document).on("click","#cancel-small-form-background",function(){jQuery(".spb-modal-tabs").html("");jQuery(".spb-modal-tabs").hide();jQuery("#spb_edit_form").hide();jQuery("body").css("overflow","");return false});g(document).on("click","#save-small-form",function(){saveSmallFormEditing();return false});g(".spb_most_used, .spb_ui_tab, .spb_med_tab, .spb_layout_tab, .spb_misc_tab, .spb_search_tab, .spb_saved_el_tab, .spb_saved_pages_el_tab").on("click",function(){g("#sf_search_elements").val("");g(".hide-modal_elements").removeClass("hide-modal_elements");g(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab");g(this).addClass("active_tab");if(!jQuery(this).hasClass("spb_saved_el_tab")){g(".spb-content-elements").show()}if(jQuery(this).hasClass("spb_med_tab")){g(".spb-item-slideout li").css("display","none");g(".spb_tab_media_nav").parent().css("display","inline-block");g(".spb-content-elements").fadeIn(300)}if(jQuery(this).hasClass("spb_search_tab")){g(".spb-item-slideout li").css("display","inline-block");g(".spb-content-elements").fadeIn(300)}if(jQuery(this).hasClass("spb_saved_pages_el_tab")){g(".spb-item-slideout").css("display","none");g(".spb-prebuilt-pages .spb_template_li").css("display","inline-block");g(".spb-prebuilt-pages .sf_prebuilt_template").css("display","inline-block");g(".spb-prebuilt-pages").fadeIn(300)}if(jQuery(this).hasClass("spb_ui_tab")){g(".spb-item-slideout li").css("display","none");g(".spb_tab_ui_nav").parent().css("display","inline-block");g(".spb-content-elements-ui").fadeIn(300)}if(jQuery(this).hasClass("spb_layout_tab")){g(".spb-item-slideout li").css("display","none");g(".spb_tab_layout_nav").parent().css("display","inline-block");g(".spb-content-elements-layout").fadeIn(300)}if(jQuery(this).hasClass("spb_saved_el_tab")){g(".spb-item-slideout").css("display","none");g(".spb-item-slideout li").css("display","none");g(".spb-content-elements").css("display","none");g(".spb-content-elements-saved .spb_elements_li").css("display","inline-block");g(".spb-content-elements-saved").fadeIn(300)}if(jQuery(this).hasClass("spb_misc_tab")){g(".spb-item-slideout li").css("display","none");g(".spb_tab_misc_nav").parent().css("display","inline-block");g(".spb-content-elements-misc").fadeIn(300)}if(jQuery(this).hasClass("spb_most_used")){g(".spb-content-elements").css("display","none");g(".spb-item-slideout li").css("display","none");g(".spb-most-used-elements li").css("display","inline-block");g(".spb-most-used-elements").fadeIn(300)}});g(document).on("click",".spb_element_section_tab",function(){jQuery(".spb_element_section_tab").removeClass("active_tab");jQuery(this).addClass("active_tab");jQuery(".element_tab_content").hide();jQuery("."+jQuery(this).attr("data-content-name")).show()});g(document).on("click","#sf_directory_calculate_coordinates",function(j){j.preventDefault();var i=new google.maps.Geocoder();i.geocode({address:jQuery("#sf_directory_address").val()},function(k){jQuery("#sf_directory_lat_coord").val(k[0].geometry.location.lat());jQuery("#sf_directory_lng_coord").val(k[0].geometry.location.lng())})});g(document).on("mouseenter",".spb_sortable",function(i){i.preventDefault();if(!g("body").hasClass("startedDragging")){g(this).find(".controls_right:first").fadeIn(100);g(this).find(".spb_element_wrapper").addClass("over_element_wrapper")}});g(document).on("mouseleave",".spb_sortable",function(i){i.preventDefault();g(this).find(".controls_right:first , .column_size_wrapper:first").hide();g(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show();g(this).removeClass("over_element_wrapper")});g(document).on("click","#close-fullscreen-preview",function(i){i.preventDefault();jQuery("body").css("overflow","");g("#spb_edit_form").html("").fadeOut()});g("#previewpage-spb").click(function(i){i.preventDefault();if(!jQuery(".spb_main_sortable > div").length){alert("Please add some content before previewing the page.")}else{jQuery("body").css("overflow","hidden");jQuery("#spb_edit_form").html('<div class="spb_preview_fmodal"><div class="spb_preview_fmodal_top_bar"><span class="spb_smodal_header_text">Previewing Page</span><a href="#" id="close-fullscreen-preview" style="float:right;color: #FFFEFE;padding: 15px;">Close Preview</a></div><div class="spb_preview_lockdiv"></div><div class="spb_preview_fmodal_content"><div class="spinnerholder"><div class="spinnermessage"><h4>'+jQuery("#spb_loading").val()+'</h4></div><div class="importspinner">  <div class="bounce1"></div> <div class="bounce2"></div> <div class="bounce3"></div> </div></div></div></div>').show().css({"padding-top":60});jQuery(".spb_preview_fmodal_content").load(g("#post-preview").attr("href"))}});g(document).on("click","#sf_search_elements",function(){g(".spb_search_tab").trigger("click")});g(document).on("input","#sf_search_saved_elements",function(){var k=false;var i;if(g(".page_builder_saved_elements .spb_saved_el_tab").hasClass("active_tab")){i=".spb-content-elements-saved"}else{i=".spb-prebuilt-pages"}if(g(this).val().length>1){var l=g(this).val();l=l.toLowerCase().replace(/\b[a-z]/g,function(m){return m.toUpperCase()});var j=l.toLowerCase();g(i+" > li").find("a").each(function(){if(g(this).html().toLowerCase().indexOf(j)<0){g(this).parent().addClass("hide-modal_elements")}else{g(this).parent().removeClass("hide-modal_elements");k=true}})}else{g(i+" > li").find("a").parent().removeClass("hide-modal_elements")}if(g(this).val()===""||!k){g(i+" > li").find("a").parent().removeClass("hide-modal_elements")}});g(document).on("input","#sf_search_elements",function(){var j=false;if(g(this).val().length>1){var k=g(this).val();k=k.toLowerCase().replace(/\b[a-z]/g,function(l){return l.toUpperCase()});var i=k;g(".spb-content-elements > li").find("a").each(function(){if(g(this).html().indexOf(i)<0){g(this).parent().addClass("hide-modal_elements")}else{g(this).parent().removeClass("hide-modal_elements");j=true;jQuery(".spb-elements-no-results").hide()}})}else{g(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements");jQuery(".spb-elements-no-results").hide()}if(g(this).val()===""||!j){g(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements");jQuery(".spb-elements-no-results").hide()}if(g(this).val()!==""&&g(this).val().length>=3&&!j){g(".spb-content-elements > li").find("a").parent().addClass("hide-modal_elements");jQuery(".spb-elements-no-results").show()}});g(document).on("input",".asset-auto-complete",function(){var j=false;if(g(this).val().length>1){var k=g(this).val();k=k.toLowerCase().replace(/\b[a-z]/g,function(l){return l.toUpperCase()});var i=k;g(".spb-content-elements > li").find("a").each(function(){if(g(this).html().indexOf(i)<0){g(this).hide()}else{g(this).show();j=true}})}else{g(".spb-content-elements > li").find("a").show()}if(g(this).val()===""||!j){g(".spb-content-elements > li").find("a").show()}});g(document).on("input",".search-icon-grid",function(){if(g(this).val().length>1){var k=g(this).val();k=k.toLowerCase().replace(/\b[a-z]/g,function(l){return l.toUpperCase()});var i=k.toLowerCase();var j=false;g(".font-icon-grid > li").find("span").each(function(){if(g(this).html().indexOf(i)<0){g(this).parent().hide()}else{g(this).parent().show();j=true}})}else{g(".font-icon-grid > li").show()}});g("#spb .dropable_el, #spb .dropable_column").draggable({helper:function(){return g('<div id="drag_placeholder">'+g(this).html()+"</div>").appendTo("body")},zIndex:999999999999,revert:"invalid",distance:2,start:function(){cleaningAfterClosingElementsModal();jQuery("body").addClass("startedDragging");jQuery(".metabox-builder-content").removeClass("empty-builder");jQuery(".spb-item-slideout").hide();jQuery(".dropdown-toggle").removeClass("selected");jQuery(".dropdown").removeClass("open");g(".main_wrapper").prepend('<div class="newtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>');var j=0;g(".sortable_1st_level").each(function(){if(g(this).parent().hasClass("spb_main_sortable")&&g(this).hasClass("spb_last")){j++;g(this).after('<div class="new_sortable_element spb_first spb_last" datael-position="'+j+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>')}});var i=1;g(".spb_row .spb_column_container").each(function(){jQuery(this).prepend('<div datael-position="1" datael-class="row_top_'+i+'" class="newrowtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"></div></div></div>');jQuery(this).addClass("row_top_"+i);i++});j=0;g(".spb_row .spb_sortable").each(function(){if(g(this).parent().hasClass("spb_column_container")&&g(this).hasClass("spb_last")){j++;g(this).addClass("spb_row_"+j);g(this).after('<div class="newrow_sortable_element spb_first spb_last" datael-position="'+j+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>')}});initDroppable()},stop:function(){jQuery("body").removeClass("startedDragging");jQuery(".newtop_sortable_element").remove();jQuery(".new_sortable_element").remove();jQuery(".newrowtop_sortable_element").remove();jQuery(".newrow_sortable_element").remove()}});initDroppable();g(".dropdown-toggle").on("click",function(k){k.preventDefault();g(".dropdown-toggle").removeClass("selected");g(".spb-elements-no-results").hide();if(!g(this).hasClass("spb_custom_elements")){g(".spb_tab_media_nav").parent().show();g(" .spb-item-slideout").hide();g(".page_builder_saved_elements").hide();g(".page_builder_elements_header").show();g(".spb_elements_tabs_header").show();g(".spb_search_tab").addClass("active_tab");g("#spb_edit_form").show().css({opacity:0.8});g("body").css({overflow:"hidden"});g("#spb-option-slideout").fadeIn();g(".spb-content-elements.spb-item-slideout").show();g(".spb-prebuilt-pages-fullscreen").removeClass("selected");g(".spb-content-elements").removeClass("selected");g(".spb-item-slideout").removeClass("selected")}else{g(".page_builder_saved_elements .spb_saved_el_tab").click();g(".page_builder_saved_elements").show();g(".spb_elements_tabs_header").show();g(".page_builder_elements_header").hide();g("#spb_edit_form").show().css({opacity:0.8});g("body").css({overflow:"hidden"});g("#spb-option-slideout").fadeIn()}if(g(this).hasClass("spb_prebuilt_pages")){if(g(".spb-prebuilt-pages").hasClass("selected")){g(".spb-item-slideout").removeClass("selected");return}}if(g(this).hasClass("spb_prebuilt_pages")){g(".spb-item-slideout").removeClass("selected");if(!g("body").hasClass("spb-fullscreen-mode")){g(".spb-content-elements").removeClass("selected");g(".spb-content-elements").hide()}}if(g(this).hasClass("spb_content_elements")){g(".spb-prebuilt-pages").removeClass("selected");g(".spb-prebuilt-pages").hide();g(".spb_columns").parent().removeClass("open")}if(g(this).hasClass("spb-prebuilt-pages")){g(".spb-content-elements").removeClass("selected");g(".spb-content-elements").hide()}if(g("#spb-elements").hasClass("subnav-fixed")||g(this).hasClass("spb_templates")||g(this).hasClass("spb_custom_elements")||g(this).hasClass("spb_columns")){if(g(this).parent().hasClass("open")){g(this).parent().removeClass("open");return}else{g("#spb-elements .dropdown").removeClass("open");g(this).parent().addClass("open")}}else{g(".dropdown").removeClass("open");var i=g("#spb-option-slideout");var j=g(this).attr("data-slideout");var l=g("."+j);if(g(this).hasClass("spb-prebuilt-pages-fullscreen")){i=g(".spb-prebuilt-pages-fullscreen")}if(l.hasClass("selected")){g(".spb-item-slideout").removeClass("selected");g(".spb-prebuilt-pages-fullscreen").removeClass("selected");return}g(this).addClass("selected")}});g("#publish").click(function(){g("#spb_content").html("")});g(".clickable_layout_action").click(function(){g(".dropdown-toggle").removeClass("selected");g(".dropdown").removeClass("open")});g("#spb-elements .clickable_action").click(function(i){i.preventDefault();if(currentAsset===""){currentAsset=g(".main_wrapper")}if((jQuery(this).hasClass("spb_accordion_nav")&&currentAsset.parents(".spb_tabs").length>0)||(jQuery(this).hasClass("spb_tabs_nav")&&currentAsset.parents(".spb_accordion").length>0)){currentAsset="";close_elements_dropdown()}else{getElementMarkup(currentAsset,g(this),"initDroppable");currentAsset="";close_elements_dropdown()}});g(".spb-content-elements .clickable_action, .spb-most-used-elements  .clickable_action").click(function(i){var j=jQuery(this);i.preventDefault();if(currentAsset===""){currentAsset=g(".main_wrapper")}getElementMarkup(currentAsset,g(this),"initDroppable");currentAsset="";jQuery(".tab_closing .icon-close").trigger("click");save_spb_html();setTimeout(function(){savePbHistory(j.attr("data-element"),j.find("p").text(),"Added");trackMostusedElements(j.attr("data-element"))},2000)});g("#spb-elements .clickable_layout_action").click(function(i){i.preventDefault();getElementMarkup(g(".main_wrapper"),g(this),"initDroppable")});g(document).on("click",".spb_tabs_holder .add_element, .spb_accordion_holder .add_element",function(i){i.preventDefault();currentAsset=g(this).parent().parent();open_elements_dropdown();g(this).parent().hide();g(this).parent().parent().find(".container-helper").show()});g(document).on("click",".add-element-to-column",function(i){i.preventDefault();if(g(this).parent().parent().parent().hasClass("spb_tabs_holder")||g(this).parent().parent().parent().hasClass("spb_accordion_helper")){g(this).parent().fadeOut();g(this).parent().parent().find(".tabs_expanded_helper").fadeIn()}else{if(g(this).parent().parent().parent().parent().parent().hasClass("spb_accordion_holder")){g(this).parent().hide();g(this).parent().parent().find(".tabs_expanded_helper").show()}else{currentAsset=g(this).parent().parent();open_elements_dropdown()}}});columnControls();if(g("#spb").length==1){g("div#postdivrich").before('<p class="page-builder-switch"><a class="spb_switch-to-builder button-primary" style="display:none;" href="#">Use Page Builder</a></p>');g("#spb").children().first().append('<span class="icon-expand-less pb-main-icon"></span><span class="icon-expand-more pb-main-icon"></span>');g("#spb h2").first().prepend('<span class="icon-icon-page-builder pb-main-icon"></span>');var d=g("#spb-elements").attr("data-color-scheme");jQuery("body").addClass(d);var h=g("#postdivrich"),c=g("#spb"),f=getURLVars();g(".spb_switch-to-builder").click(function(i){i.preventDefault();if(h.is(":visible")){if(!isTinyMceActive()){if(switchEditors!==undefined){g("#content-tmce").get(0).click()}}h.hide();c.show();g("#spb_js_status").val("true");g(this).html("Use Default editor").addClass("default");spb_shortcodesToBuilder(false);spb_navOnScroll()}else{jQuery.swift_page_builder.save_spb_html();h.show();c.hide();g("#spb_js_status").val("false");g(window).trigger("resize");g(this).html("Use Page Builder").removeClass("default")}});if(f.spb_enabled&&g("#spb_js_status").val()==="false"){g(".spb_switch-to-builder").trigger("click")}if(g("#spb_js_status").val()=="true"&&jQuery("#wp-content-wrap").hasClass("tmce-active")){h.hide();c.show();g(".spb_switch-to-builder").html("Use Default editor").addClass("default")}else{h.show();c.hide();g(".spb_switch-to-builder").html("Swift Page Builder");g(".spb_switch-to-builder").show()}}jQuery(window).load(function(){if(g("#spb_js_status").val()=="true"&&jQuery("#wp-content-wrap").hasClass("tmce-active")){setTimeout(function(){spb_shortcodesToBuilder(false)},50);spb_navOnScroll()}});jQuery(".toggle_title").live("click",function(){if(jQuery(this).hasClass("toggle_title_active")){jQuery(this).removeClass("toggle_title_active").next().hide()}else{jQuery(this).addClass("toggle_title_active").next().show()}});g.swift_page_builder.galleryImagesControls();g("#spb").on("click",".add-text-block-to-content",function(i){i.preventDefault();if(g(this).attr("parent-container")){if(g(this).parent().parent().hasClass("ui-accordion-content")||g(this).parent().parent().hasClass("ui-tabs-panel")){getElementMarkup(g(this).parent().parent(),g("#spb_text_block"))}else{if(g(this).parent().parent().parent().hasClass("ui-accordion-content")||g(this).parent().parent().parent().hasClass("ui-tabs-panel")){getElementMarkup(g(this).parent().parent(),g("#spb_text_block"))}else{if(g(this).parent().parent().hasClass("spb_column_container")){getElementMarkup(g(this).parent().parent(),g("#spb_text_block"))}else{getElementMarkup(g(g(this).attr("parent-container")),g("#spb_text_block"))}}}}else{getElementMarkup(g(this).parent().parent().parent(),g("#spb_text_block"))}});function e(){var j=g(".spb_content_elements").parent().find("ul");var i=j.children("li").get();i.sort(function(l,k){var n=g(l).text().toUpperCase();var m=g(k).text().toUpperCase();return(n<m)?-1:(n>m)?1:0});g.each(i,function(k,l){j.append(l)})}e();function b(j){var k=g("."+j);var i=k.children("li").get();i.sort(function(m,l){var o=g(m).text().toUpperCase();var n=g(l).text().toUpperCase();return(o<n)?-1:(o>n)?1:0});g.each(i,function(l,m){k.append(m)})}b("spb-content-elements");b("spb-most-used-elements");g(".alt_background").live("change",function(){g(".altbg-preview").attr("class","altbg-preview");g(".altbg-preview").addClass(jQuery(this).val())});g(document).on("click","#clear-spb",function(i){i.preventDefault();clear_page_builder_content()});g(".columns-dropdown").before('<ul class="nav assetsearch" style="display:none;"><input type="text" class="asset-auto-complete" placeholder="Search Element"></ul>');g(document).on("click","#fullscreen-spb",function(i){i.preventDefault();g(".spb-item-slideout").hide();g(".spb-item-slideout").removeClass("selected");g(".dropdown-toggle").removeClass("selected");g(".dropdown").removeClass("open");g("body").addClass("spb-fullscreen-mode");g(".normalscreen-step1").hide();g("#spb-empty").addClass("spb-empty-fullscreen");g(".assetsearch").show();g(".fullscreen-step1").show();g(".spb-prebuilt-pages").hide();g("#spb-option-slideout").addClass("spb-option-slideout-fullscreen-aux");initDroppable()});g("#close-fullscreen-spb").on("click",function(i){i.preventDefault();g("#spb-option-slideout").removeClass("spb-option-slideout-fullscreen-aux");g(".spb-item-slideout-fullscreen").addClass("spb-item-slideout");g(".spb-item-slideout").removeClass("spb-item-slideout-fullscreen");g(".spb-item-slideout").hide();g(".spb-content-elements > li").find("a").show();g(".asset-auto-complete").val("");g(".previewpage-spb").hide();g(".assetsearch").hide();g(".fullscreen-step1").hide();g(".normalscreen-step1").show();g(".spb-prebuilt-pages-fullscreen").removeClass("selected");g(".spb-prebuilt-pages-fullscreen").removeClass("open");g(".spb-item-slideout-fullscreen").hide();g("body").removeClass("spb-fullscreen-mode");g("#spb-empty").removeClass("spb-empty-fullscreen");g(".spb-prebuilt-pages").removeClass("spb-prebuilt-pages-fullscreen");g(".spb-prebuilt-pages").addClass("spb-item-slideout");g(".spb_content_elements").show();g(".spb-item-slideout").hide();g(".dropdown-toggle").removeClass("selected");g(".spb_templates").removeClass("open")});function a(){if(g("body").hasClass("spb-fullscreen-mode")){return true}else{return false}}});function spb_reorder_saved_templates(){var b=jQuery(".spb-prebuilt-pages");var a=b.children("li").get();a.sort(function(d,c){var f=jQuery(d).text().toUpperCase();var e=jQuery(c).text().toUpperCase();return(f<e)?-1:(f>e)?1:0});jQuery.each(a,function(c,d){b.append(d)})}function trackMostusedElements(b){var a={action:"spb_track_used_elements",data_element_type:b};jQuery.post(ajaxurl,a,function(c){})}function savePbHistory(f,e,c){var a=jQuery("#post").find("#post_ID").val();var b=spb_getContentFromTinyMCE();var d={action:"spb_save_pb_history",data_element:e,data_element_type:f,data_pb_content:b,data_type:c,data_page_id:a};jQuery.post(ajaxurl,d,function(g){jQuery("#dropdown-history").html(g)})}function cleaningAfterClosingElementsModal(){jQuery(".spb-elements-no-results").hide();jQuery("#spb-option-slideout").fadeOut(300);jQuery("#spb_edit_form").fadeOut();jQuery("#spb_edit_form").css({opacity:0.8}).hide();jQuery(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab");jQuery("body").css("overflow","");jQuery(".spb-content-elements").removeClass("selected");jQuery(".spb-item-slideout").removeClass("selected");jQuery(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements");jQuery("#sf_search_elements").val("")}function open_elements_dropdown(){jQuery(".spb_content_elements:first").trigger("click")}function close_elements_dropdown(){jQuery(".spb_content_elements").parents(".content-dropdown").removeClass("open");jQuery(".spb_content_elements").removeClass("selected")}function spb_templateSystem(){jQuery(document).on("click","#spb_save_template",function(f){f.preventDefault();var b=sfTranslatedText.attr("data-spb-save-template-header");var d=sfTranslatedText.attr("data-spb-save-template-msg");var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-template"></a><div id="modal-save-template" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+b+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_template_name"  type="text" class="validate"><label for="saved_template_name">'+d+"</label>";a+='</div></div><div class="modal-footer modal-save-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal-save-template").openModal();var c=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),true);removeClassProcessedElements();jQuery("#modal-save-template").attr("data-element",c)});jQuery(document).on("mouseenter",".sf_prebuilt_template",function(){jQuery(this).find("a").next().show()});jQuery(document).on("mouseleave",".sf_prebuilt_template",function(){jQuery(this).find("a").next().hide()});jQuery(document).on("click",".sf_prebuilt_template a",function(b){b.preventDefault();var a={action:"sf_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,a,function(c){jQuery(".spb_main_sortable").append(c).find(".spb_init_callback").each(function(){var d=window[jQuery(this).attr("value")];if(typeof d==="function"){d(jQuery(this).closest(".spb_content_element"))}});initDroppable();save_spb_html()});cleaningAfterClosingElementsModal()});jQuery(document).on("click",".spb_template_li a",function(b){b.preventDefault();var a={action:"spb_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,a,function(c){jQuery(".spb_main_sortable").append(c).find(".spb_init_callback").each(function(){var d=window[jQuery(this).attr("value")];if(typeof d==="function"){d(jQuery(this).closest(".spb_content_element"))}});initDroppable();save_spb_html()});jQuery(this).parents(".custom-templates-nav").find(".dropdown").removeClass("open")});jQuery(document).on("click",".spb_remove_template",function(d){d.preventDefault();var b=sfTranslatedText.attr("data-spb-delete-page-template-header");var c=sfTranslatedText.attr("data-spb-delete-saved-template-msg1");var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element"></a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+b+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+c+"</label>";a+='</div></div><div class="modal-footer modal-remove-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal-delete-saved-element").openModal();deletedElement=jQuery(this).closest(".spb_template_li").find("a").attr("data-template_id")})}function spb_customElementSystem(){jQuery(document).on("click",".modal-cancel-button",function(a){a.preventDefault();jQuery(".modal_wrapper").remove()});jQuery(document).on("click",".modal-save-template .modal-ok-button",function(){var c=jQuery(".modal-content #saved_template_name").val();var a=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));if(c!==null&&c!==""){var b={action:"spb_save_template",template:a,template_name:c};jQuery.post(ajaxurl,b,function(d){jQuery(".spb-prebuilt-pages").html(d);spb_reorder_saved_templates();jQuery(".spb-prebuilt-pages .spb_template_li").show()})}Materialize.toast(sfTranslatedText.attr("data-spb-saved-template"),2000);jQuery(".modal_wrapper").remove()});jQuery(document).on("click",".modal-delete-element .modal-ok-button",function(){var b=deletedElement.closest(".spb_sortable");var a;if(b.parents(".spb_gmaps").length>0){deletedElement.closest(".spb_sortable").parent().remove()}deletedElement.closest(".spb_sortable").remove();b.addClass("empty_column");save_spb_html();deletedElement=deletedElement.parent().parent().parent();a=deletedElement.find(".el_name_holder").attr("data_default_name");if(deletedElement.hasClass("spb_row")||deletedElement.hasClass("spb_column")){a=deletedElement.find(".asset-name").text()}savePbHistory(deletedElement.attr("data-element_type"),a,"Deleted");Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2000);jQuery(".modal_wrapper").remove();deletedElement=null});jQuery(document).on("click",".modal-delete-page-builder-content .modal-ok-button",function(){if(isTinyMceActive()!==true){jQuery("#content").val("")}else{tinyMCE.activeEditor.setContent("")}jQuery("#spb_content").find(".spb_sortable").remove();jQuery("#spb_content").find(".new_sortable_element").remove();jQuery("#spb_content").find(".newtop_sortable_element").remove();save_spb_html();jQuery(".modal-delete-page-builder-content").remove();Materialize.toast(sfTranslatedText.attr("data-spb-deleted-pb-content"),2000);jQuery(".modal_wrapper").remove()});jQuery(document).on("click",".modal-delete-saved-element .modal-ok-button",function(){var a={action:"spb_delete_element",element_id:deletedElement.closest(".spb_elements_li").find("a").attr("data-element_id")};jQuery.post(ajaxurl,a,function(b){jQuery(".spb-content-elements-saved").html(b);setTimeout(Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),1500),2000)})});jQuery(document).on("click",".modal-save-element .modal-ok-button",function(){var c=jQuery(".modal-content #saved_element_name").val();if(c!==null&&c!==""){var a=jQuery("#modal-save-element").attr("data-element");var b={action:"spb_save_element",element:a,element_name:c};jQuery.post(ajaxurl,b,function(d){jQuery(".spb-content-elements-saved").html(d)})}jQuery("#modal-save-element").remove();Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2000);jQuery(".modal_wrapper").remove()});jQuery(document).on("click",".modal-save-element .modal-cancel-button",function(a){a.preventDefault();jQuery(".modal-content #saved_element_name").val("");jQuery(".modal-content #saved_element_name").focusout()});jQuery(document).on("click",".element-save",function(f){f.preventDefault();var b=sfTranslatedText.attr("data-spb-save-element-header");var d=sfTranslatedText.attr("data-spb-save-element-msg");var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-element"></a><div id="modal-save-element" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+b+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_element_name"  type="text" class="validate"><label for="first_name">'+d+"</label>";a+='</div></div><div class="modal-footer modal-save-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal-save-element").openModal();var c=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),true);removeClassProcessedElements();jQuery("#modal-save-element").attr("data-element",c)});jQuery(document).on("click",".spb_elements_li a",function(b){b.preventDefault();var a={action:"spb_load_element",element_id:jQuery(this).attr("data-element_id")};jQuery.post(ajaxurl,a,function(c){if(currentAsset===""){currentAsset=".spb_main_sortable"}jQuery(currentAsset).append(c).find(".spb_init_callback").each(function(){var d=window[jQuery(this).attr("value")];if(typeof d==="function"){d(jQuery(this).closest(".spb_content_element"))}});currentAsset="";save_spb_html()});cleaningAfterClosingElementsModal()});jQuery(document).on("click",".spb_remove_element",function(d){d.preventDefault();var b=sfTranslatedText.attr("data-spb-delete-saved-element-header");var c=sfTranslatedText.attr("data-spb-delete-saved-element-msg1");var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element">Modal</a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+b+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+c+"</label>";a+='</div></div><div class="modal-footer modal-delete-saved-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal-delete-saved-element").openModal();deletedElement=jQuery(this)})}var $win,$nav,navTop,isFixed=0;function spb_navOnScroll(){$win=jQuery(window);$nav=jQuery("#spb-elements");if(jQuery("#spb-elements").is(":visible")){navTop=jQuery("#spb-elements").length&&jQuery("#spb-elements").offset().top-28}else{navTop=jQuery("#spb").offset().top-28}isFixed=0;spb_processScroll();$win.on("scroll",spb_processScroll)}function spb_processScroll(){var a=$win.scrollTop();if(a>=navTop&&!isFixed){isFixed=1;$nav.addClass("subnav-fixed")}else{if(a<=navTop&&isFixed){isFixed=0;$nav.removeClass("subnav-fixed");jQuery("#spb-elements .dropdown").removeClass("open")}}}function check_form_dependency_fields(){jQuery("#spb_edit_form .dependency-field").each(function(){var a=jQuery(this).attr("data-parent-operator");var e=jQuery(this).attr("data-parent-value");var c;var b;var d;var g=0;var f;switch(a){case"=":case"equals":f=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id"));if(f.length>1){c=f.find("select").val()}else{if(f.hasClass("buttonset")){if(f.attr("checked")=="checked"){c=f.attr("data-value-on")}else{c=f.attr("data-value-off")}}else{c=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val()}}if(c==e){jQuery(this).removeClass("hide")}else{jQuery(this).addClass("hide")}break;case"!=":case"not":b=jQuery(this).attr("data-parent-value").split(",");d=jQuery(this);g=0;jQuery.each(b,function(h,i){f=jQuery("#spb_edit_form  ."+d.attr("data-parent-id"));if(f.length>1){c=f.find("select").val()}else{if(f.hasClass("buttonset")){if(f.attr("checked")=="checked"){c=f.attr("data-value-on")}else{c=f.attr("data-value-off")}}else{c=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val()}}if(c!=i.trim()){g++}});if(g==b.length){jQuery(this).removeClass("hide")}else{jQuery(this).addClass("hide")}break;case"or":b=jQuery(this).attr("data-parent-value").split(",");d=jQuery(this);g=0;jQuery.each(b,function(h,i){f=jQuery("#spb_edit_form  ."+d.attr("data-parent-id"));if(f.length>1){c=f.find("select").val()}else{if(f.hasClass("buttonset")){if(f.attr("checked")=="checked"){c=f.attr("data-value-on")}else{c=f.attr("data-value-off")}}else{c=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val()}}if(c!=i.trim()){g++}});if(g==b.length){jQuery(this).addClass("hide")}else{jQuery(this).removeClass("hide")}break}})}function updateSelectedImagesOrderIds(a){var b=[];jQuery(a).find(".added img").each(function(){b.push(jQuery(this).attr("rel"))});jQuery(a).parent().prev().prev().val(b.join(","))}function attachedImgSortable(a){jQuery(a).sortable({forcePlaceholderSize:true,placeholder:"widgets-placeholder",cursor:"move",items:"li",update:function(){updateSelectedImagesOrderIds(a)}})}function spb_shortcodesToBuilder(g){var e=spb_getContentFromTinyMCE();var c=e.indexOf("<form");var b=e.indexOf("</form>");if(jQuery.trim(e).length>0&&jQuery.trim(e).substr(0,1)!="["&&jQuery.trim(e).substr(0,5)!="<span"&&!g){alert("By switching to the page builder, any content not in page builder assets will be removed for consistency.");if(isTinyMceActive()){tinyMCE.get("content").setContent(e)}else{e=jQuery("#content").text(e)}}var a=jQuery(".spb-svg-loader.clone").html();jQuery(".spb_main_sortable").html('<div class="spb-loading-message">'+a+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60});if(!g){jQuery(".spb_switch-to-builder").hide()}if(c>=0){b+=7-c;var d=e.substr(c,b).replace(/"/g,"'");e=e.replace(e.substr(c,b),d)}var f={action:"spb_shortcodes_to_builder",content:e};jQuery.post(ajaxurl,f,function(h){jQuery(".spb_main_sortable").html(h);spb_elements_hide_controls(true);jQuery.swift_page_builder.isMainContainerEmpty();jQuery(".spb_switch-to-builder").show();jQuery(".tooltipped").tooltip({delay:50});jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable"));initDroppable();jQuery(".spb_main_sortable").find(".spb_init_callback").each(function(){var i=window[jQuery(this).attr("value")];if(typeof i==="function"){i(jQuery(this).closest(".spb_sortable"))}})})}function spb_getContentFromTinyMCE(){var a="";if(isTinyMceActive()){var b=tinyMCE.get("content");a=b.save()}else{a=jQuery("#content").text()}return a}function moved(){var c=jQuery(".spb_sortable");var b=draggedItem.position();var e={top:b.top,bottom:b.top+draggedItem.height(),left:b.left,right:b.left+draggedItem.width()};var a=c.not(draggedItem).filter(function(){var n=jQuery(this);var m=n.position();var h={top:m.top,bottom:m.top+n.height(),left:m.left,right:m.left+n.width()};var f=h.top<=e.bottom;var j=e.top<=h.bottom;var i=h.left<=e.right;var g=e.left<=h.right;var l=false;var k=false;var d=e.left-h.left;var o=h.bottom-e.bottom;o=Math.abs(o);if(d<(n.width())&&d>0){l=true}if(o<(n.height())&&o>0){k=true}return f&&j&&i&&g&&l&&k});a.each(function(){if(jQuery(this).hasClass("spb_first")){jQuery(this).removeClass("spb_first")}})}function spb_load_top_preloader(){jQuery(".page-builder-switch").after('<div class="spb_top_loader">'+jQuery(".spb-svg-loader.clone").html()+"</div>")}function spb_elements_hide_controls(a){if(a){jQuery(".controls_right , .column_size_wrapper").hide();jQuery(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show()}else{jQuery(".controls_right , .column_size_wrapper").show()}jQuery(".spb_top_loader").remove()}function startInitDragging(){var a=0;elements_values_array=[];jQuery(".spb_element_wrapper").each(function(){jQuery(this).attr("data-values-id",a);a++;elements_values_array.push(jQuery(this).children('input[type="hidden"]').detach())});jQuery("body").addClass("startedDragging")}function endInitDragging(){var a=0;jQuery(".spb_element_wrapper").each(function(){a=jQuery(this).attr("data-values-id");jQuery(this).append(elements_values_array[a])});save_spb_html();jQuery("body").addClass("startedDragging")}function initDroppable(){jQuery(".spb_sortable_container:not(.not-sortable)").sortable({opacity:0.7,connectWith:".spb_sortable_container",placeholder:"widgets-placeholder",delay:200,refreshPositions:true,tolerance:"intersect",scrollSensitivity:10,scrollspeed:10,cancel:".spb_map_pin, .spb_elem_handles, .el_name_editor",change:function(a,b){if(!b.item.hasClass("spb_row")){b.placeholder.stop().height(24).animate({height:54,duration:"fast",easing:"easeout",opacity:0},300)}},start:function(b,c){startInitDragging();jQuery(".spb_elem_controls").hide();c.placeholder.css("opacity","0");c.placeholder.css("width",c.item.width());c.placeholder.height(c.item.height());if(c.item.hasClass("spb_row")){var a=c.item.find(".spb_sortable_container");a.parent().hide();c.item.find(".controls_right, .spb_elem_controls").hide();c.placeholder.width(c.item.width()-20);c.placeholder.height(66);c.placeholder.addClass("widgets-placeholder");a.parent().parent().css("height",66);c.item.parent().find(".spb_row").addClass("spb_sortable_container_dragging")}c.item.find(".controls_right, .spb_elem_controls, .spb_tab_controls").hide();if(c.item.hasClass("span12")){c.placeholder.css({maxWidth:c.item.width()})}else{if(c.item.hasClass("spb_last")){c.placeholder.removeClass("widgets-placeholder");c.placeholder.addClass("widgets-placeholder-last")}c.placeholder.css({maxWidth:c.item.width()})}jQuery("#spb_content").addClass("sorting-started");draggedItem=c.item},receive:function(a,b){jQuery(a.target).parent().parent().hasClass("spb_row");if(b.item.hasClass("spb_column")&&b.item.parents(".spb_column").length>0){jQuery(b.sender).sortable("cancel")}if(b.item.hasClass("spb_row")&&b.item.parents(".spb_row").length>0){jQuery(this).sortable("cancel");jQuery(b.sender).sortable("cancel")}if(b.item.hasClass("spb_accordion")&&b.item.parents(".spb_tabs").length>0){jQuery(b.sender).sortable("cancel")}if(b.item.hasClass("spb_tabs")&&b.item.parents(".spb_accordion").length>0){jQuery(b.sender).sortable("cancel")}},stop:function(b,c){endInitDragging();var a=c.item.find(".spb_sortable_container");jQuery("body").removeClass("startedDragging");jQuery("#spb_content").removeClass("sorting-started");jQuery(window).unbind("mousemove",moved);jQuery.swift_page_builder.addLastClass(".spb_main_sortable");c.item.parent().find(".spb_row").removeClass("spb_sortable_container_dragging");a.parent().show();jQuery(".spb_sortable_container_dragging").addClass("spb_sortable_container").removeClass("spb_sortable_container_dragging");if(c.item.hasClass("spb_row")){a=c.item.find(".spb_sortable_container");a.parent().parent().css("height","100%")}jQuery(".newrowbottom_sortable_element").remove()},update:function(){jQuery.swift_page_builder.save_spb_html();removeClassProcessedElements()},beforeStop:function(a,b){if(b.item.hasClass("not-column-inherit")&&b.placeholder.parent().hasClass("not-column-inherit")&&b.placeholder.parents(".spb_row").length<=0){return false}}});jQuery(".spb_column_container").sortable({connectWith:".spb_column_container, .spb_main_sortable",forcePlaceholderSize:true,placeholder:"widgets-placeholder",cursor:"move",items:"div.spb_sortable",cancel:".spb_gmaps, .el_name_editor",refreshPositions:true,change:function(a,b){if(!b.item.hasClass("spb_row")){b.placeholder.stop().height(24).animate({height:54,duration:"fast",easing:"easeout",opacity:0},300)}},start:function(a,b){startInitDragging();if(b.item.parent().parent().hasClass("spb_tabs_holder")||b.item.parent().parent().parent().parent().hasClass("spb_accordion_holder")){b.item.parent().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>')}b.item.closest(".spb_row").find(".spb_element_wrapper").first().find(".spb_column_container").first().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>');jQuery(".spb_elem_controls").hide();b.placeholder.css("opacity","0");b.placeholder.css("width",b.item.width());if(b.item.hasClass("span12")){b.placeholder.css({maxWidth:b.item.width()})}else{if(b.item.hasClass("spb_last")){b.placeholder.removeClass("widgets-placeholder");b.placeholder.addClass("widgets-placeholder-last")}b.placeholder.css({maxWidth:b.item.width()})}},stop:function(){endInitDragging();jQuery(".newrowbottom_sortable_element").remove();jQuery("body").removeClass("startedDragging");jQuery.swift_page_builder.save_spb_html()}});jQuery(".spb_main_sortable").droppable({greedy:true,accept:".dropable_el, .dropable_column",drop:function(a,b){getElementMarkup(jQuery(this),b.draggable,"addLastClass");jQuery("body").removeClass("startedDragging")}});jQuery(".spb_row").droppable({greedy:true,accept:function(a){if(a.hasClass("spb_row")||(a.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&a.hasClass("not_dropable_in_third_level_nav"))){return false}else{if(a.hasClass("dropable_el")||a.hasClass("dropable_column")){return true}}},drop:function(a,b){jQuery(this).parent().removeClass("spb_ui-state-active");getElementMarkup(jQuery(this),b.draggable,"addLastClass");spb_elements_hide_controls(false);jQuery(b.item).removeClass("controls_back");jQuery("body").removeClass("startedDragging")}});jQuery(".spb_row").sortable({connectWith:".spb_main_sortable",cancel:".spb_row, .el_name_editor",placeholder:"widgets-placeholder",helper:function(){return jQuery('<div id="itemHelper" class="spb_content_element spb_sortable sortable_1st_level span4 spb_first spb_last"><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"></div></div><div class="spb_element_wrapper"></div></div>').appendTo("body")},cursor:"move",start:function(a,b){b.helper.addClass(b.item.attr("data-element_type"));b.helper.width(230);b.helper.height(104);b.helper.css({minHeight:104});b.helper.find(".spb_element_wrapper").addClass(b.item.attr("data-element_type")+"_helper");if(b.item.hasClass("span12")){b.placeholder.css({maxWidth:b.item.width()})}else{b.placeholder.css({maxWidth:b.item.width()/100*85})}jQuery("#spb_content").addClass("sorting-started");jQuery(".spb_row").addClass("sorting-started");draggedItem=b.item;jQuery("body").addClass("startedDragging")},stop:function(){endInitDragging();jQuery("#spb_content").removeClass("sorting-started");jQuery(".spb_row").removeClass("sorting-started");jQuery.swift_page_builder.addLastClass(".spb_main_sortable");jQuery("body").removeClass("startedDragging")},items:"div.spb_sortable:not(.spb_row)",update:function(){jQuery.swift_page_builder.save_spb_html();removeClassProcessedElements()},});jQuery(".spb_column_container").droppable({greedy:true,accept:function(a){if(a.hasClass("spb_accordion_nav")&&jQuery(this).parents(".spb_tabs").length>0){return false}if(a.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&a.hasClass("not_dropable_in_third_level_nav")){return false}else{if(a.hasClass("dropable_el")===true){return true}}if(jQuery(this).parents(".spb_column").length>0&&a.hasClass("dropable_column")){return false}if(jQuery(this).parents(".spb_row").length>0&&a.hasClass("dropable_column")){return true}},drop:function(a,b){jQuery(this).parent().removeClass("spb_ui-state-active");getElementMarkup(jQuery(this),b.draggable,"addLastClass");spb_elements_hide_controls(false);jQuery(b.item).removeClass("controls_back");jQuery("body").removeClass("startedDragging")}});jQuery(".newtop_sortable_element").droppable({greedy:true,accept:".dropable_el, .dropable_column, .spb_sortable",hoverClass:"topelementover",zIndex:99999999,drop:function(a,b){getElementMarkup(jQuery(".main_wrapper"),b.draggable,"topElement");jQuery(b.item).removeClass("controls_back");return false}});jQuery(".new_sortable_element").droppable({greedy:true,accept:".dropable_el, .dropable_column",hoverClass:"topelementover",zIndex:99999999,drop:function(a,b){if(jQuery(this).hasClass("new_sortable_element")){getElementMarkup(jQuery(this),b.draggable,"newElementDrop")}else{getElementMarkup(jQuery(this),b.draggable,"newRowElementDrop")}jQuery(".newtop_sortable_element").remove();jQuery(".new_sortable_element").remove();jQuery(".newrowtop_sortable_element").remove();jQuery(".newrow_sortable_element").remove();jQuery.swift_page_builder.save_spb_html()}});jQuery(".spb_sortable").not(".spb_row, .spb_map_pin, .spb_multilayer_parallax_layer, .spb-dont-resize").resizable({helper:"marker",handles:"e",start:function(a,b){jQuery(b.helper).width(b.originalSize.width)},resize:function(a,g){var i=0;var d=g.element.parent().parent().parent();var j=0;var f=0;var c=0;var h=0;var e=0;var b=jQuery(".metabox-builder-content");if(d.hasClass("spb_row")&&!d.hasClass("spb_column")){h=28;e=28;c=38}else{if(d.hasClass("spb_column")){h=25;e=25;b=d;c=50}else{if(d.parent().parent().parent().hasClass("spb_accordion")){h=25;e=25;b=d;c=25}else{if(d.hasClass("spb_tabs")||d.hasClass("spb_tour")){h=40;jQuery(g.helper).height(64)}else{if(d.parent().hasClass("spb_tabs")||d.parent().hasClass("spb_tour")){h=25;b=d;c=0}}}}}i=Math.round((b.width()-h)/6);j=parseInt(g.helper.width()/(b.width()-e)*100).toString();jQuery(this).resizable("option","maxWidth",b.width()-c);jQuery(g.helper).find(".width-helper").remove();if(j>=88&&j<=100){j="1/1 ";percentageClass="span12";f="12"}if(j>=70&&j<88){j="3/4 ";percentageClass="span9";f="9"}if(j>=60&&j<70){j="2/3 ";percentageClass="span8";f="8"}if(j>=42&&j<60){j="1/2 ";percentageClass="span6";f="6"}if(j>=29&&j<42){j="1/3 ";percentageClass="span4";f="4"}if(j>=20&&j<29){j="1/4 ";percentageClass="span3";f="3"}if(j<20){j="1/6 ";percentageClass="span2";f="2"}if(g.element.hasClass("spb_column")){g.element.find(".col_sm").attr("value",f)}jQuery(g.helper).append('<div  class="width-helper" style="font-size:25px;width:100%;height:100%;text-align:right;float:right;margin-right:30px;margin-top:20px;"> '+j+" Width </div>");jQuery(this).resizable("option","minWidth",i)},stop:function(c,d){jQuery("body").removeClass("startedDragging");if(d.element.hasClass("spb_text_block")){setTimeout(function(){d.element.css("height",d.element.find(".spb_element_wrapper").height()+30)},50)}else{if(d.element.hasClass("spb_column")){setTimeout(function(){d.element.css("height","100%")},50)}else{d.element.css("height",d.originalSize.height)}}var b=jQuery(this).closest(".spb_sortable");var a=jQuery(this);a.queue(function(){var e=getColumnSize(b);d.element.css({width:""});save_spb_html();b.removeClass(e[0]).addClass(percentageClass);save_spb_html();jQuery(this).dequeue()})}});jQuery("#spb-option-slideout").draggable({greedy:true,hoverClass:"",zIndex:99999999});jQuery(".newrowtop_sortable_element,  .newrow_sortable_element").droppable({greedy:true,accept:function(a){if(a.hasClass("dropable_el")){return true}if(jQuery(this).parents(".spb_column").length>0&&a.hasClass("dropable_column")){return false}if(jQuery(this).parents(".spb_row").length>0&&a.hasClass("dropable_column")){return true}},hoverClass:"topelementover",zIndex:99999999,drop:function(a,b){if(jQuery(this).hasClass("new_sortable_element")){getElementMarkup(jQuery(this),b.draggable,"newElementDrop")}else{getElementMarkup(jQuery(this),b.draggable,"newRowElementDrop")}jQuery(".newtop_sortable_element").remove();jQuery(".new_sortable_element").remove();jQuery(".newrowtop_sortable_element").remove();jQuery(".newrow_sortable_element").remove();jQuery.swift_page_builder.save_spb_html()}})}function getElementMarkup(d,a,c){var b={action:"spb_get_element_backend_html",element:a.attr("id"),data_element:a.attr("data-element"),data_width:a.attr("data-width")};spb_load_top_preloader();jQuery.post(ajaxurl,b,function(e){d.removeClass("empty_column");var f=1;if(c=="topElement"){jQuery(d).prepend(e).find(".spb_init_callback").each(function(){var h=window[jQuery(this).attr("value")];if(typeof h==="function"){h(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}})}else{if(c=="newElementDrop"){jQuery(".sortable_1st_level").each(function(){if(jQuery(this).parent().hasClass("spb_main_sortable")&&jQuery(this).hasClass("spb_last")){if(parseInt(jQuery(d).attr("datael-position"))==f){if(jQuery(this).hasClass("spb_row")){if(jQuery(d).hasClass("newrowtop_sortable_element")){jQuery(this).find(".spb_column_container").prepend(e)}else{if(jQuery(d).hasClass("new_sortable_element")){jQuery(this).after(e)}else{jQuery(this).find(".spb_column_container").append(e)}}}else{jQuery(this).after(e)}jQuery(".main_wrapper").find(".spb_init_callback").each(function(){var h=window[jQuery(this).attr("value")];if(typeof h==="function"){h(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}})}f++}})}else{if(c=="newRowElementDrop"){if(jQuery(d).hasClass("newrowtop_sortable_element")){jQuery(".spb_row .spb_column_container").each(function(){if(jQuery(this).hasClass(jQuery(d).attr("datael-class"))){jQuery(this).prepend(e)}})}else{jQuery(".spb_row").find(".spb_sortable").each(function(){if(parseInt(jQuery(d).attr("datael-position"))==f){jQuery(".spb_row_"+f).after(e)}f++})}}else{var g=true;if(d.parent().hasClass("spb_tabs_holder")||d.parent().parent().parent().hasClass("spb_accordion_holder")){if(e.indexOf("spb_row")>0||e.indexOf("spb_tabs")>0||e.indexOf("spb_accordion")>0){g=false;Materialize.toast(sfTranslatedText.attr("data-spb-error-row-add"),2000)}}if(g==true){jQuery(d).append(e).find(".spb_init_callback").each(function(){var h=window[jQuery(this).attr("value")];if(typeof h==="function"){h(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}});if(d.parent().hasClass("spb_tabs_holder")||d.parent().parent().parent().hasClass("spb_accordion_holder")){jQuery(d).find(".container-helper, .tabs_expanded_helper, .ui-resizable-handle").last().detach().appendTo(d)}}}}}jQuery.swift_page_builder.isMainContainerEmpty();jQuery(".spb_sortable").removeClass("spb_row_1");jQuery(".spb_sortable").removeClass("spb_row_2");jQuery(".spb_sortable").removeClass("spb_row_3");jQuery(".spb_sortable").removeClass("spb_row_4");jQuery(".spb_sortable").removeClass("spb_row_5");jQuery(".spb_sortable").removeClass("spb_row_6");jQuery(".spb_sortable").removeClass("spb_row_7");jQuery(".spb_sortable").removeClass("spb_row_8");jQuery(".spb_sortable").removeClass("spb_row_9");jQuery(".spb_sortable").removeClass("spb_row_10");jQuery(".spb_sortable").removeClass("row_top_1");jQuery(".spb_sortable").removeClass("row_top_2");jQuery(".spb_sortable").removeClass("row_top_3");jQuery(".spb_sortable").removeClass("row_top_4");jQuery(".spb_sortable").removeClass("row_top_5");initDroppable();save_spb_html();spb_elements_hide_controls(true)})}function columnControls(){jQuery(document).on("click","#spb .column_delete",function(b){b.preventDefault();var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal1" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+sfTranslatedText.attr("data-spb-delete-element-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-element-header")+"</label>";a+='</div></div><div class="modal-footer modal-delete-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal1").openModal();deletedElement=jQuery(this)});jQuery(document).on("click",".controls_right .column_minimize",function(a){a.preventDefault();jQuery(this).parent().parent().next().hide();jQuery(this).next().show();jQuery(this).hide();jQuery(this).parent().parent().next().find(".minimize_row").val("yes");save_spb_html()});jQuery(document).on("click",".controls_right .column_maximize",function(a){a.preventDefault();jQuery(this).parent().parent().next().show();jQuery(this).prev().show();jQuery(this).hide();jQuery(this).parent().parent().next().find(".minimize_row").val("no");save_spb_html()});jQuery(document).on("click",".controls_right .column_clone, .spb_elem_controls .column_clone, .spb_accordion .column_clone, .spb_tab_controls .column_clone, .row_controls .column_clone",function(c){c.preventDefault();var b=jQuery(this).closest(".spb_sortable"),a=b.clone();a.find(".spb_element_wrapper").removeClass("over_element_wrapper");a.insertAfter(b).hide().fadeIn();if(a.hasClass("spb_tabs")){a.find(".ui-tabs-nav span").each(function(){updateTabTitleIds(jQuery(this).text())})}a.find(".controls_right , .column_size_wrapper, .spb_elem_controls").hide();a.find(".ui-resizable-handle").remove();a.find(".spb_initialized").removeClass("spb_initialized");a.find(".spb_init_callback").each(function(){var d=window[jQuery(this).attr("value")];if(typeof d==="function"){d(a)}});save_spb_html();initDroppable();savePbHistory(a.attr("data-element_type"),a.find(".el_name_holder").attr("data_default_name"),"Cloned")});jQuery(document).on("click",".spb_sortable .spb_sortable .column_popup",function(b){b.preventDefault();var a=confirm("Press OK to pop (move) section to the top level, Cancel to leave");if(a){jQuery(this).closest(".spb_sortable").appendTo(".spb_main_sortable");initDroppable();save_spb_html()}});jQuery(document).on("click","#spb .column_edit, #spb .column_edit_trigger",function(b){b.preventDefault();var a=jQuery(this).closest(".spb_sortable");showEditForm(a)});jQuery(".column_increase").live("click",function(c){c.preventDefault();var a=jQuery(this).closest(".spb_sortable"),b=getColumnSize(a);if(b[1]){a.removeClass(b[0]).addClass(b[1]);b=getColumnSize(a);jQuery(a).find(".column_size:first").html(b[3]);save_spb_html()}});jQuery(".column_decrease").live("click",function(c){c.preventDefault();var a=jQuery(this).closest(".spb_sortable"),b=getColumnSize(a);if(b[2]){a.removeClass(b[0]).addClass(b[2]);b=getColumnSize(a);jQuery(a).find(".column_size:first").html(b[3]);save_spb_html()}})}function removeClassProcessedElements(){jQuery(".spb_sortable").removeClass("spb_element_processed")}function showEditSmallForm(c){var b="";var f="";var d="";if(!jQuery("body").hasClass("edited-form-element")){c.parent().addClass("edited-form-element");if(c.parent().parent().hasClass("ui-tabs-nav")){b=c.parent().find("span").text();f="Tabs";if(c.parent().attr("data-title-icon")){d=c.parent().attr("data-title-icon")}}else{b=c.parent().find(".title-text").text();f="Accordion";if(c.parent().attr("data-title-icon")){d=c.parent().attr("data-title-icon")}}if(jQuery("body").find("edit-small-modal").length<=0){var a=jQuery(".spb-svg-loader.clone").html();jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+a+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60});var e={action:"spb_show_small_edit_form",element_name:f,tab_name:b,icon:d};jQuery.post(ajaxurl,e,function(g){jQuery(".spb-modal-tabs").html(g);jQuery(".spb-modal-tabs").show();jQuery("#spb_edit_form").html("")})}}return false}function updateTabTitleIds(c){var a=c.replace(/[^A-Za-z0-9\-_]/g,"");var b;if(jQuery('.ui-tabs-nav span:contains("'+c+'")').length>1){jQuery('.ui-tabs-nav span:contains("'+c+'")').each(function(d){if(d===0){b=jQuery.trim(a)}else{b=jQuery.trim(a)+"-"+d}jQuery(this).parent().parent().attr("id",b)})}else{jQuery('.ui-tabs-nav span:contains("'+c+'")').parent().parent().attr("id",a)}}function updateAccordionTitleIds(c){var a=c.toLowerCase().replace(/[^A-Za-z0-9\-_]/g,"-");var b;if(jQuery('.ui-accordion-header .title-text:contains("'+c+'")').length>1){jQuery('.ui-accordion-header .title-text:contains("'+c+'")').each(function(d){if(d===0){b=jQuery.trim(a)}else{b=jQuery.trim(a)+"-"+d}jQuery(this).parent().attr("accordion_id",b)})}else{jQuery('.ui-accordion-header .title-text:contains("'+c+'")').parent().attr("accordion_id",a)}}function saveSmallFormEditing(){var a=jQuery(".edited-form-element");var c=jQuery(".small_form_title").val();var b;if(a.parent().hasClass("ui-tabs-nav")){a.find("span").first().text(c)}else{a.find(".title-text").text(c)}a.attr("data-title-icon",jQuery(".small_form_icon").val());if(a.hasClass("ui-accordion-header")){b=updateAccordionTitleIds(c)}else{b=updateTabTitleIds(c)}a.removeClass("edited-form-element");jQuery(".spb-modal-tabs").html("");jQuery(".spb-modal-tabs").hide();jQuery("#spb_edit_form").hide();jQuery("body").css("overflow","");Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2000);save_spb_html();return false}function detailedControls(a){if(a.is(":checked")){jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").hide();jQuery(" #spb .design_tab .lb_uislider").parent().show();if(jQuery("#spb_edit_form .custom-padding-top").val()==jQuery("#spb_edit_form .custom-padding-bottom").val()){jQuery("#padding_vertical_val").val(jQuery("#spb_edit_form .custom-padding-bottom").val())}if(jQuery("#spb_edit_form .custom-padding-left").val()==jQuery("#spb_edit_form .custom-padding-right").val()){jQuery("#padding_horizontal_val").val(jQuery("#spb_edit_form .custom-padding-left").val())}if(jQuery("#spb_edit_form .custom-margin-top").val()==jQuery("#spb_edit_form .custom-margin-bottom").val()){jQuery("#margin_vertical_val").val(jQuery("#spb_edit_form .custom-margin-bottom").val())}jQuery("#spb_edit_form .custom_css_percentage").trigger("change")}else{jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").show();jQuery(" #spb .design_tab .lb_uislider").parent().hide()}}function showEditForm(b){var c=generateShortcodesFromHtml(b,true),e=b.attr("data-element_type");jQuery("body").css("overflow","hidden");jQuery("#spb_edit_form").css({opacity:1});var a=jQuery(".spb-svg-loader.clone").html();jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+a+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60});var d={action:"spb_show_edit_form",element:e,shortcode:c};jQuery.post(ajaxurl,d,function(f){jQuery("#spb_edit_form").html(f).css({"padding-top":0,opacity:1});jQuery.swift_page_builder.initializeFormEditing(b);jQuery(".tooltipped").tooltip({delay:0});jQuery(".spb_edit_form_elements").resizable({handles:"e",create:function(){jQuery(".ui-resizable-e").css("cursor","ew-resize")}}).draggable({cancel:".spb_edit_wrap",delay:300});jQuery(".textfield").each(function(){var i=jQuery(this),h=i.next("label");if(i.val()&&!h.hasClass("active")){h.addClass("active")}});jQuery("#spb .edit_form_line").find(".simplified_controls").each(function(){detailedControls(jQuery(this))});jQuery("#spb .edit_form_line").find("select").not(".disabled").material_select();jQuery(".icon_section_holder, .pricing_column_holder").find("select").not(".disabled").material_select();jQuery(".collapsible").collapsible({accordion:false});check_form_dependency_fields();jQuery(".icon_section_holder, .pricing_column_holder, .pricing_column_feature_holder").sortable({connectWith:".section_repeater",placeholder:"widgets-placeholder",opacity:0.8,tolerance:"intersect",cursor:"move",handle:".icon-drag-handle",cancel:".right_bottom_section",start:function(h,i){i.placeholder.css("opacity","0")},change:function(h,i){i.placeholder.stop().height(24).animate({height:74,duration:"fast",easing:"easeout",opacity:0},200)},});var g;if(b.attr("data-element_type")=="spb_text_block"){if(b.find(".content").is("[data-form-content]")){g=b.find(".content").attr("data-form-content")}else{g=jQuery(".spb_edit_form_elements .form_content").val()}jQuery(".spb_edit_form_elements #form_content").parent().parent().parent().hide();if(g!==undefined&&g.indexOf("</form>")>=0){tinyMCE.activeEditor.setContent(g)}}jQuery("#spb .edit_form_line").find("select").not(".disabled").trigger("contentChanged")})}function saveFormEditing(g){jQuery("#publish").show();jQuery(".spb_main_sortable, #spb-elements, .spb_switch-to-builder").show();removeClassProcessedElements();var m=g.find(".el_name_holder").text();var q=g.find(".el_name_holder").first().text();if(m===""){m=g.find(".element_name").val()}var h=g.hasClass("spb_map_pin")?true:false;if(g.hasClass("spb_section")){g.find(".page-name-holder").empty()}if(g.attr("data-element_type")=="spb_text_block"){var i=tinyMCE.activeEditor.getContent();var n=i.indexOf("<form");var b=i.indexOf("</form>");if(n>=0){b+=7-n;var j=i.substr(n,b).replace(/"/g,"'");var a=i.substr(0,n);var f=i.substr(n+b,i.length);i=a+j+f;jQuery(".spb_edit_form_elements .form_content").val(i)}}jQuery("#spb_edit_form .spb_param_value").each(function(){var w=jQuery(this).attr("name"),C="",T="";if(jQuery(this).hasClass("icon_section_holder")){w="content";jQuery(this).find(".section_repeater").each(function(){var U=jQuery(this).find(".section_icon_image i").attr("class");var X=jQuery(this).find(".icon_title").val();var V=jQuery(this).find(".icon_link").val();var W=jQuery(this).find(".icon_target").val();T+='[spb_icon_box_grid_element title="'+X+'" target="'+W+'" link="'+V+'" icon="'+U+'"][/spb_icon_box_grid_element]'});C=T}if(w=="custom_css"){var I,O,s,L,J,P,M,t,Q,u,S,x,A,y,z,G,D,N;if(jQuery("#spb_edit_form .custom_css_percentage").attr("checked")=="checked"){N="%"}else{N="px"}I=jQuery("#spb_edit_form .custom-margin-top").val();O=jQuery("#spb_edit_form .custom-margin-left").val();L=jQuery("#spb_edit_form .custom-margin-right").val();s=jQuery("#spb_edit_form .custom-margin-bottom").val();Q=jQuery("#spb_edit_form .custom-border-top").val();u=jQuery("#spb_edit_form .custom-border-left").val();S=jQuery("#spb_edit_form .custom-border-right").val();x=jQuery("#spb_edit_form .custom-border-bottom").val();J=jQuery("#spb_edit_form .custom-padding-top").val();P=jQuery("#spb_edit_form .custom-padding-left").val();M=jQuery("#spb_edit_form .custom-padding-right").val();t=jQuery("#spb_edit_form .custom-padding-bottom").val();y=jQuery("#spb_edit_form .border_color_global").val();z=jQuery("#spb_edit_form .border_styling_global").find("select").val();G=jQuery("#spb_edit_form .back_color_global").val();if(z=="default"){z=""}if(I==""){I=0}if(O==""){O=0}if(L==""){L=0}if(s==""){s=0}if(Q==""){Q=0}if(u==""){u=0}if(S==""){S=0}if(x==""){x=0}if(J==""){J=0}if(P==""){P=0}if(M==""){M=0}if(t==""){t=0}A="margin-top: "+I+N+";margin-bottom: "+s+N+";";A+="border-top: "+Q+"px "+z+" "+y+";border-left: "+u+"px "+z+" "+y+";border-right: "+S+"px "+z+" "+y+";border-bottom: "+x+"px "+z+" "+y+";";A+="padding-top: "+J+N+";padding-left: "+P+N+";padding-right: "+M+N+";padding-bottom: "+t+N+";";if(G!=""&&G!=undefined){A+="background-color:"+G+";"}jQuery(this).val(A)}if(jQuery(this).hasClass("pricing_column_holder")){T="";var r="";w="content";jQuery(this).find(".section_repeater").each(function(){var W=jQuery(this).find(".plan_name").val();var U=jQuery(this).find(".plan_highlight_column").find("select").val();var Y=jQuery(this).find(".plan_price").val();var V=jQuery(this).find(".plan_period").val();var ab=jQuery(this).find(".plan_button_text").val();var Z=jQuery(this).find(".plan_link_url").val();var X=jQuery(this).find(".plan_link_target").find("select").val();var aa=jQuery(this).find(".plan_extra_class").val();r="";jQuery(this).parent().find(".section_repeater_features").each(function(){var ad=jQuery(this).find(".plan_feature_name").val();var ac=jQuery(this).find(".feature_el_class").val();r+='[spb_pricing_column_feature feature_name="'+ad+'" el_class="'+ac+'"] [/spb_pricing_column_feature]'});T+='[spb_pricing_column name="'+W+'" highlight_column="'+U+'" price="'+Y+'"';T+=' period="'+V+'" btn_text="'+ab+'" href="'+Z+'" target="'+X+'" el_class="'+aa+'" ]'+r+"[/spb_pricing_column]"});C=T}if(g.attr("data-element_type")!="spb_row"&&g.attr("data-element_type")!="spb_column"){if(w==="element_name"&&jQuery(this).val()!==""){g.find(".el_name_holder").first().html(jQuery(this).val())}if(w==="element_name"&&jQuery(this).val()===""){g.find(".el_name_holder").first().html(g.find(".el_name_holder").attr("data_default_name"))}}else{if(w==="element_name"&&jQuery(this).val()!==""){g.find(".asset-name").first().html(jQuery(this).val())}}if(jQuery(this).hasClass("textfield")){C=jQuery(this).val()}if(jQuery(this).hasClass("textfield_html")){C=jQuery(this).val();g.find("[name="+w+"_code]").val(base64_encode(rawurlencode(C)));C=jQuery("<div/>").text(C).html()}else{if(jQuery(this).hasClass("colorpicker")){C=jQuery(this).val()}else{if(jQuery(this).hasClass("uislider")){C=jQuery(this).val()}else{if(jQuery(this).hasClass("icon-picker")){C=jQuery(this).val()}else{if(jQuery(this).hasClass("buttonset")){C=jQuery(this).val();if(jQuery(this).attr("checked")=="checked"){C=jQuery(this).attr("data-value-on")}else{C=jQuery(this).attr("data-value-off")}}else{if(jQuery(this).hasClass("dropdown")||jQuery(this).hasClass("dropdown-id")){if(w===undefined){C=jQuery(this).find("select").val();w=jQuery(this).find("select").attr("name");if(jQuery(this).find(".responsive_vis").length>0||jQuery(this).find(".row_responsive_vis").length>0||jQuery(this).find(".col_responsive_vis").length>0){var F;if(g.hasClass("spb_blank_spacer")||g.hasClass("spb_column")){F=g.find(".responsive-vis-indicator > .icons").first()}else{F=g.parent().parent().find(".responsive-vis-indicator > .icons").first()}if(C==="hidden-lg_hidden-md"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone"></i></a>')}else{if(C==="hidden-sm"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>')}else{if(C==="hidden-lg_hidden-md_hidden-sm"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Tablet"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>')}else{if(C==="hidden-lg_hidden-md_hidden-xs"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Phone"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>')}else{if(C==="hidden-xs_hidden-sm"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet + Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone hidden_vis"></i></a>')}else{if(C==="hidden-xs"){F.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>')}else{F.html("")}}}}}}jQuery(".tooltipped").tooltip({delay:50})}var B=[],K="";jQuery(this).find("option").each(function(){var U=jQuery(this).attr("value");B.push(U)});K=B.join(" ");if(!g.hasClass("spb_gallery")){g.find(".spb_element_wrapper").removeClass(K).addClass(C)}}}else{if(jQuery(this).hasClass("select-multiple")){if(w===undefined){w=jQuery(this).find("select").attr("name");C=jQuery(this).find("input").val()}}else{if(jQuery(this).hasClass("select-multiple-id")){if(w===undefined){var H=jQuery(this).find("select").val();w=jQuery(this).find("select").attr("name")}if(H){var R=H.join(",");C=R}}else{if(jQuery(this).hasClass("textarea_html")){C=getTinyMceHtml(jQuery(this));if(C!==""&&jQuery(this).hasClass("content")&&jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length>0){g.find(".column_edit_trigger").addClass("hide-layer-image");g.find(".attachment-medium").addClass("hide-layer-img")}if(C===""&&jQuery(this).hasClass("content")&&jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length>0){g.find(".column_edit_trigger").removeClass("hide-layer-image");g.find(".attachment-medium").removeClass("hide-layer-img")}}else{if(jQuery(this).hasClass("spb-checkboxes")){var E=[];jQuery(this).closest(".edit_form_line").find("input").each(function(){var U=jQuery(this);w=U.attr("name");if(U.is(":checked")){E.push(U.attr("id"))}});if(E.length>0){C=E.join(",")}}else{if(jQuery(this).hasClass("exploded_textarea")){C=jQuery(this).val().replace(/\n/g,",")}else{if(jQuery(this).hasClass("textarea")){C=jQuery(this).val()}else{if(jQuery(this).hasClass("textarea_encoded")){C=base64_encode(rawurlencode(jQuery(this).val()));g.find("[name="+w+"_code]").val(C);C=jQuery("<div/>").text(C).html()}else{if(jQuery(this).hasClass("textarea_raw_html")){C=jQuery(this).val();g.find("[name="+w+"_code]").val(base64_encode(rawurlencode(C)));C=jQuery("<div/>").text(C).html()}else{if(jQuery(this).hasClass("attach_images")){C=jQuery(this).val()}else{if(jQuery(this).hasClass("attach_image")){C=jQuery(this).val();var v;v=g.find("[name="+w+"]").next(".attachment-thumbnail");v.attr("src",jQuery(this).parent().find("li.added img").attr("src"));v.attr("srcset","");if(C!==""){v.next().addClass("image-exists");v.show()}else{v.next().removeClass("image-exists");v.hide()}}}}}}}}}}}}}}}}}w=w.replace("spb_tinymce_","");if(g.find("."+w).not(".spb_element_wrapper").is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong, button")){g.find("[name="+w+"]").html(C);if(C.indexOf("</form>")>=0){g.find("[name="+w+"]").attr("data-form-content",C)}else{if(g.find("[name="+w+"]").is("[data-form-content]")){g.find("[name="+w+"]").removeAttr("data-form-content")}}}else{if(g.hasClass("spb_row")&&w=="element_name"||w=="custom_css"||w=="back_color_global"||w=="border_styling_global"||w=="bk_image_global"||w=="border_color_global"){g.find("[name="+w+"]").last().val(C)}else{g.find("[name="+w+"]").last().val(C)}}});if(h){var l=g.find("[name=address]").val(),d=g.find("[name=pin_title]").val(),p=g.find("[name=pin_latitude]"),o=g.find("[name=pin_longitude]");if(l!==""){var e=new google.maps.Geocoder();e.geocode({address:l},function(r){p.val(r[0].geometry.location.lat());o.val(r[0].geometry.location.lng())})}else{g.find("[name=address]").val(jQuery("[name=address]").attr("data-previous-text"))}if(!d||d===""){d=l;d=d.length>15?d.substring(0,12)+"...":d}jQuery("#"+jQuery(g).parent().attr("aria-labelledby")).find("span").html(d)}var c=g.children(".spb_save_callback");if(c.length==1){var k=window[c.attr("value")];if(typeof k==="function"){}}save_spb_html();savePbHistory(g.attr("data-element_type"),q,"Edited");jQuery("#spb_edit_form").html("").hide();jQuery("body").css("overflow","")}function getTinyMceHtml(d){var b=d.attr("id"),a;window.switchEditors.go(b,"tmce");try{a=tinyMCE.get(b).getContent();if(tinyMCE.majorVersion>=4){tinyMCE.execCommand("mceRemoveEditor",true,b)}else{tinyMCE.execCommand("mceRemoveControl",true,b)}}catch(c){a=switchEditors.wpautop(d.val())}return a}function initTinyMce(c){var e,a=c.attr("id"),b=c.closest("#spb .edit_form_line"),d=b.find(".spb-textarea.textarea_html");window.tinyMCEPreInit.mceInit[a]=_.extend({},tinyMCEPreInit.mceInit.content,{resize:"vertical",height:200});if(_.isUndefined(tinyMCEPreInit.qtInit[a])){window.tinyMCEPreInit.qtInit[a]=_.extend({},tinyMCEPreInit.qtInit.replycontent,{id:a})}c.val(d.val());e=quicktags(window.tinyMCEPreInit.qtInit[a]);QTags._buttonsInit();window.switchEditors.go(a,"tmce");if(tinymce.majorVersion>="4"){tinymce.execCommand("mceAddEditor",true,a)}}function isTinyMceActive(){var a=(typeof tinyMCE!="undefined")&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden();return a}function getColumnSize(a){if(a.hasClass("span12")){return new Array("span12","span12","span9","1/1")}else{if(a.hasClass("span9")){return new Array("span9","span12","span8","3/4")}else{if(a.hasClass("span8")){return new Array("span8","span9","span6","2/3")}else{if(a.hasClass("span6")){return new Array("span6","span8","span4","1/2")}else{if(a.hasClass("span4")){return new Array("span4","span6","span3","1/3")}else{if(a.hasClass("span3")){return new Array("span3","span4","span2","1/4")}else{if(a.hasClass("span2")){return new Array("span2","span3","span2","1/6")}else{return false}}}}}}}}function save_spb_html(){jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable"));var a=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));removeClassProcessedElements();if(isTinyMceActive()!==true){jQuery("#content").val(a)}else{if(tinyMCE.get("content")){tinyMCE.get("content").setContent(a)}}jQuery.swift_page_builder.isMainContainerEmpty()}function clear_page_builder_content(){var b=sfTranslatedText.attr("data-spb-clear-pb-header");var c=sfTranslatedText.attr("data-spb-delete-pb-content-question");var a='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal-delete-pb-content" class="modal modal_spb"><div class="modal-content">';a+="<h4>"+b+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+c+"</label>";a+='</div></div><div class="modal-footer modal-delete-page-builder-content"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">Yes</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">No</a></div></div></div></div>';jQuery("#spb").append(a);jQuery("#modal-delete-pb-content").openModal()}function generateShortcodesFromHtml(b,d){var a="";var c="";var e;if(d){c=jQuery(b)}else{c=jQuery(b).children(".spb_sortable")}c.each(function(){var l=jQuery(this),p=l,m=l.find(".spb_sc_base").val(),j=getColumnSize(l),k="",q="]";if(!l.hasClass("spb_element_processed")){if(l.parent().hasClass("spb_column_container")){l.addClass("spb_element_processed")}l.children(".spb_element_wrapper").children(".spb_param_value").each(function(){var t=jQuery(this).attr("name"),r="",s="";if(jQuery(this).hasClass("textfield")){if(jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")){s=jQuery(this).html()}else{if(jQuery(this).is("button")){s=jQuery(this).text()}else{s=jQuery(this).val()}}}else{if(jQuery(this).hasClass("textfield_html")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("colorpicker")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("uislider")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("buttonset")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("icon-picker")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("dropdown")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("dropdown-id")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("select-multiple")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("select-multiple-id")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("textarea_encoded")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("textarea_raw_html")&&l.children(".spb_sortable").length===0){r=jQuery(this).parent().find("."+t+"_code").val();q="]"+r+"[/"+m+"]"}else{if(jQuery(this).hasClass("textarea_html")&&l.children(".spb_sortable").length===0){r=jQuery(this).html();q="]"+r+"[/"+m+"]"}else{if(jQuery(this).hasClass("posttypes")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("exploded_textarea")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("textarea")){if(jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")){s=jQuery(this).html()}else{s=jQuery(this).val()}}else{if(jQuery(this).hasClass("attach_images")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("attach_image")){s=jQuery(this).val()}else{if(jQuery(this).hasClass("widgetised_sidebars")){s=jQuery(this).val()}}}}}}}}}}}}}}}}}}}s=jQuery.trim(s);if(s!==""){k+=" "+t+'="'+s+'"'}});k+=' width="'+j[3]+'"';if(l.hasClass("spb_first")||l.hasClass("spb_last")){var i=(l.hasClass("spb_first"))?"first":"";var n=(l.hasClass("spb_last"))?"last":"";var f=(l.hasClass("spb_last")&&l.hasClass("spb_first"))?" ":"";k+=' el_position="'+i+f+n+'"'}var h=l.children(".spb_shortcode_callback");if(h.length==1){var o=window[h.attr("value")];if(typeof o==="function"){e=o(l)}}a+="["+m+k+q+" ";if(l.children(".spb_element_wrapper").find(".spb_column_container").length>0){h=l.children(".spb_shortcode_callback");var g=0;l.children(".spb_element_wrapper").find(".spb_column_container").each(function(){var s=generateShortcodesFromHtml(jQuery(this));if(h.length==1&&!jQuery(this).hasClass("map_pin_wrapper")){var r=window[h.attr("value")];if(typeof r==="function"){e=r(p,g)}if(e){s=" "+e.replace("%inner_shortcodes",s)+" "}g++}if(s.trim()=='[spb_accordion_tab title=""]  [/spb_accordion_tab]'||s.trim()=='[spb_accordion_tab title="" icon=""]  [/spb_accordion_tab]'||s.trim()=='[spb_accordion_tab title=""  accordion_id="" icon=""]  [/spb_accordion_tab]'){s=""}a+=s});a+="[/"+m+"] "}jQuery(".spb_column_container").removeClass("converted")}});return a}function spbTabsInitCallBack(a){a.find(".spb_tabs_holder").not(".spb_initialized").each(function(){jQuery(this).addClass("spb_initialized");var b;b=jQuery(this).tabs({panelTemplate:'<div class="row-fluid spb_column_container empty_column spb_sortable_container not-column-inherit">'+jQuery("#container-helper-block").html()+"</div>",add:function(){var c=jQuery(this).tabs("length")-1;jQuery(this).tabs("select",c);save_spb_html()}});b.find(".ui-tabs-nav").sortable({axis:"x",tolerance:"pointer",scrollSensitivity:10,scrollspeed:10,helper:"clone",opacity:0.9,start:function(c,d){d.placeholder.width(d.item.width());d.helper.width(d.item.width()+20);d.helper.css({"background-color":"#E7E7E7"})},stop:function(){b.find("ul li").each(function(){var c=jQuery(this).find("a").attr("href").replace("#","");b.find("div.spb_column_container#"+c).appendTo(b)});save_spb_html()}})});initDroppable()}function spbTabsGenerateShortcodeCallBack(e,c){var f=e.find(".ui-tabs-nav li:eq("+c+") a").text();var a="",d="";if(e.find(".ui-tabs-nav li:eq("+c+")").attr("data-title-icon")){a=e.find(".ui-tabs-nav li:eq("+c+")").attr("data-title-icon")}if(e.find(".ui-tabs-nav li:eq("+c+")").attr("id")){d=e.find(".ui-tabs-nav li:eq("+c+")").attr("id")}var b='[spb_tab title="'+f+'" icon="'+a+'" id="'+d+'"] %inner_shortcodes [/spb_tab]';if(c===null){b=""}return b}function spbAccordionInitCallBack(a){a.find(".spb_accordion_holder").not(".spb_initialized").each(function(){jQuery(this).addClass("spb_initialized");var b;b=jQuery(this).accordion({header:"> div > h3",autoHeight:true,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(d,e){e.item.children("h3").triggerHandler("focusout");save_spb_html()}});c();function c(){jQuery(document).on("click",".spb_accordion_holder .edit_tab",function(){showEditSmallForm(jQuery(this));return false})}});initDroppable()}function spbAccordionGenerateShortcodeCallBack(e,d){var b="",a="";var f=e.find(".group:eq("+d+") > h3").text();if(e.find(".group:eq("+d+") > h3").attr("data-title-icon")){b=e.find(".group:eq("+d+") > h3").attr("data-title-icon")}if(e.find(".group:eq("+d+") > h3").attr("accordion_id")){a=e.find(".group:eq("+d+") > h3").attr("accordion_id")}var c='[spb_accordion_tab title="'+f+'" accordion_id="'+a+'" icon="'+b+'"] %inner_shortcodes [/spb_accordion_tab]';return c}function spbMessageInitCallBack(a){var b=a.find(".spb_param_value.color");var c=b.val();b.closest(".spb_element_wrapper").addClass(c)}function spbTextSeparatorInitCallBack(a){var b=a.find(".spb_param_value.title_align");var c=b.val();b.closest(".spb_element_wrapper").addClass(c)}function getURLVars(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d}function rawurldecode(a){return decodeURIComponent(a+"")}function rawurlencode(a){a=(a+"").toString();return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function base64_decode(h){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,b,a,m,l,k,j,n,g=0,o=0,e="",f=[];if(!h){return h}h+="";do{m=d.indexOf(h.charAt(g++));l=d.indexOf(h.charAt(g++));k=d.indexOf(h.charAt(g++));j=d.indexOf(h.charAt(g++));n=m<<18|l<<12|k<<6|j;c=n>>16&255;b=n>>8&255;a=n&255;if(k==64){f[o++]=String.fromCharCode(c)}else{if(j==64){f[o++]=String.fromCharCode(c,b)}else{f[o++]=String.fromCharCode(c,b,a)}}}while(g<h.length);e=f.join("");e=utf8_decode(e);return e}function base64_encode(j){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d,c,b,n,m,l,k,o,h=0,p=0,g="",f=[];if(!j){return j}j=utf8_encode(j+"");do{d=j.charCodeAt(h++);c=j.charCodeAt(h++);b=j.charCodeAt(h++);o=d<<16|c<<8|b;n=o>>18&63;m=o>>12&63;l=o>>6&63;k=o&63;f[p++]=e.charAt(n)+e.charAt(m)+e.charAt(l)+e.charAt(k)}while(h<j.length);g=f.join("");var a=j.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)}function utf8_decode(a){var c=[],e=0,g=0,f=0,d=0,b=0;a+="";while(e<a.length){f=a.charCodeAt(e);if(f<128){c[g++]=String.fromCharCode(f);e++}else{if(f>191&&f<224){d=a.charCodeAt(e+1);c[g++]=String.fromCharCode(((f&31)<<6)|(d&63));e+=2}else{d=a.charCodeAt(e+1);b=a.charCodeAt(e+2);c[g++]=String.fromCharCode(((f&15)<<12)|((d&63)<<6)|(b&63));e+=3}}}return c.join("")}function stripslashes(a){return(a+"").replace(/\\(.?)/g,function(c,b){switch(b){case"\\":return"\\";case"0":return"\u0000";case"":return"";default:return b}})}function utf8_encode(a){if(a===null||typeof a==="undefined"){return""}var h=(a+"");var i="",b,e,c=0;b=e=0;c=h.length;for(var d=0;d<c;d++){var g=h.charCodeAt(d);var f=null;if(g<128){e++}else{if(g>127&&g<2048){f=String.fromCharCode((g>>6)|192)+String.fromCharCode((g&63)|128)}else{f=String.fromCharCode((g>>12)|224)+String.fromCharCode(((g>>6)&63)|128)+String.fromCharCode((g&63)|128)}}if(f!==null){if(e>b){i+=h.slice(b,e)}i+=f;b=e=d+1}}if(e>b){i+=h.slice(b,c)}return i};